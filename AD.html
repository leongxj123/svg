<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºå…»äº‘ - é˜¿å°”èŒ¨æµ·é»˜ç—‡ç¾¤ä½“å®ˆæŠ¤è€…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0f9ff; /* Light blue background */
        }
        .header {
            background-color: #3b82f6; /* Brand blue */
            color: white;
            padding: 1.5rem;
            text-align: center;
            border-bottom-left-radius: 1.5rem;
            border-bottom-right-radius: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .header h1 { font-size: 2rem; font-weight: 700; }
        .header p { font-size: 1rem; margin-top: 0.5rem; }

        .nav-button { background-color: #60a5fa; color: white; padding: 0.75rem 1.5rem; border-radius: 0.75rem; text-decoration: none; transition: background-color 0.3s ease, transform 0.2s ease; font-weight: 500; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: inline-flex; align-items: center; gap: 0.5rem; }
        .nav-button:hover { background-color: #3b82f6; transform: translateY(-2px); }

        .section-title { font-size: 1.75rem; font-weight: 600; color: #1e3a8a; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid #60a5fa; display: flex; align-items: center; gap: 0.5rem; }

        .game-selection-container { display: flex; flex-wrap: wrap; gap: 0.6rem; justify-content: center; margin-bottom: 2rem; }
        .game-select-button { background-color: #10b981; color: white; padding: 0.8rem 1rem; border-radius: 0.75rem; font-size: 0.85rem; font-weight: 500; cursor: pointer; transition: background-color 0.3s, transform 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border: none; display: inline-flex; flex-direction: column; align-items: center; gap: 0.3rem; width: 110px; /* Fixed width */ height: 95px; /* Fixed height for aspect ratio */ justify-content: center; text-align: center; line-height: 1.1; }
        .game-select-button i { font-size: 1.4rem; margin-bottom: 0.2rem;}
        .game-select-button:hover { background-color: #059669; transform: translateY(-2px); }
        .game-select-button.active { background-color: #047857; transform: scale(1.05) translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }

        .game-area { padding: 1.5rem; background-color: #e0f2fe; border-radius: 1rem; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); min-height: 480px; display: flex; flex-direction: column; align-items: center; }
        .game-content { display: none; width: 100%; max-width: 600px; text-align: center; }
        .game-content.active { display: block; }
        .game-title { font-size: 1.5rem; font-weight: 600; color: #1e40af; margin-bottom: 0.5rem; }
        .game-description { font-size: 0.9rem; color: #374151; margin-bottom: 1rem; line-height: 1.6; }
        
        .difficulty-selector, .timer-display { margin-bottom: 1rem; font-size: 0.9rem; color: #1e3a8a; }
        .difficulty-selector button { background-color: #bfdbfe; color: #1e3a8a; padding: 0.4rem 0.8rem; border-radius: 0.375rem; margin: 0 0.25rem; font-size: 0.85rem; transition: background-color 0.2s; border: 1px solid #93c5fd; }
        .difficulty-selector button:hover { background-color: #93c5fd; }
        .difficulty-selector button.selected { background-color: #3b82f6; color: white; font-weight: bold; }
        .timer-display span { font-weight: bold; color: #1d4ed8; }

        /* Memory Match */
        .card-container { display: grid; gap: 0.5rem; padding: 0.5rem; max-width: 500px; margin: 0 auto; }
        .card { width: 100%; aspect-ratio: 1 / 1; background-color: #93c5fd; border-radius: 0.375rem; display: flex; justify-content: center; align-items: center; font-size: 2rem; cursor: pointer; transition: transform 0.3s ease, background-color 0.3s ease; perspective: 1000px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
        .card.flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; justify-content: center; align-items: center; border-radius: 0.375rem;}
        .card-front { background-color: #93c5fd; color: #1e3a8a; }
        .card-front::before { content: '?'; font-size: 1.8rem; font-weight: bold; }
        .card-back { background-color: #bfdbfe; color: #1e40af; transform: rotateY(180deg); }
        .card.matched { background-color: #6ee7b7; cursor: default; transform: scale(0.95); }
        .card.matched .card-front, .card.matched .card-back { background-color: #6ee7b7; }
        .card:not(.matched):hover { transform: translateY(-2px) scale(1.02); }

        .status-message { margin-top: 1rem; font-size: 1.125rem; font-weight: 500; color: #1e3a8a; min-height: 2.5rem; padding: 0.5rem; background-color: #fff; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .control-button { background-color: #2563eb; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.3s, transform 0.2s ease; margin-top: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: none; }
        .control-button i { margin-right: 0.3em; }
        .control-button:hover { background-color: #1d4ed8; transform: translateY(-1px); }
        .control-button:disabled { background-color: #9ca3af; cursor: not-allowed; }

        .info-box { background-color: white; padding: 1.5rem; border-radius: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 1.5rem; } /* Reduced margin-bottom */
        .info-box h3 { font-size: 1.25rem; font-weight: 600; color: #1e3a8a; margin-bottom: 0.75rem; }
        .info-box p, .info-box ul { color: #374151; line-height: 1.6; }
        .info-box ul { list-style-position: inside; }
        .info-box .sub-section { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid #e5e7eb; }
        .info-box .sub-section h4 { font-size: 1.1rem; font-weight: 600; color: #1e40af; margin-bottom: 0.5rem; }


        /* Object Recognition */
        .object-recognition-game .image-display { width: 120px; height: 120px; background-color: #e2e8f0; margin: 1rem auto; display: flex; justify-content: center; align-items: center; color: #475569; border-radius: 0.75rem; font-size: 4rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .object-recognition-game .options-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.75rem; margin-top: 1.5rem; }
        .object-recognition-game .option-button { background-color: #fbbf24; color: #78350f; padding: 0.75rem 1.25rem; border-radius: 0.5rem; font-size: 0.9rem; font-weight: 500; cursor: pointer; transition: background-color 0.3s, transform 0.2s; border: none; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .object-recognition-game .option-button:hover { background-color: #f59e0b; transform: translateY(-1px); }
        .object-recognition-game .option-button.correct { background-color: #34d399; color: white; }
        .object-recognition-game .option-button.incorrect { background-color: #f87171; color: white; }

        /* Number Sequence */
        .number-sequence-game .number-display-area { font-size: 2.8rem; font-weight: bold; color: #1d4ed8; padding: 2rem; background-color: #fff; border-radius: 0.75rem; margin: 1rem auto; text-align: center; min-height: 100px; letter-spacing: 0.1em; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .number-sequence-game input[type="text"], .quick-math-game input[type="number"] { padding: 0.75rem 1rem; border-radius: 0.5rem; border: 1px solid #94a3b8; margin-right: 0.5rem; width: 220px; font-size: 1rem; text-align: center; }
        .number-sequence-game input[type="text"]:focus, .quick-math-game input[type="number"]:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3); }
        .number-sequence-game .timer-bar-container { width: 80%; max-width: 300px; height: 10px; background-color: #e0e0e0; border-radius: 5px; margin: 0.5rem auto; overflow: hidden;}
        .number-sequence-game .timer-bar { height: 100%; width: 100%; background-color: #3b82f6; transition: width 0.1s linear; }

        /* Quick Math */
        .quick-math-game .problem-display { font-size: 2.5rem; font-weight: bold; color: #065f46; padding: 2rem; background-color: #fff; border-radius: 0.75rem; margin: 1rem auto; text-align: center; min-height: 100px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }

        /* Color Match */
        .color-match-game .color-word-display { font-size: 3rem; font-weight: bold; padding: 2rem; background-color: #fff; border-radius: 0.75rem; margin: 1rem auto; text-align: center; min-height: 120px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; justify-content: center; align-items: center; }
        .color-match-game .answer-buttons { display: flex; justify-content: center; gap: 1rem; margin-top: 1.5rem; }
        .color-match-game .answer-button { padding: 0.75rem 2rem; font-size: 1rem; font-weight: 500; border-radius: 0.5rem; cursor: pointer; transition: background-color 0.3s, transform 0.2s; border: none; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .color-match-game .answer-button.match { background-color: #34d399; color: white; }
        .color-match-game .answer-button.match:hover { background-color: #059669; }
        .color-match-game .answer-button.no-match { background-color: #f87171; color: white; }
        .color-match-game .answer-button.no-match:hover { background-color: #ef4444; }

        /* Daily Tasks */
        .daily-task-game .task-list { list-style: none; padding: 0; margin: 1rem auto; max-width: 400px; }
        .daily-task-game .task-item { background-color: #fff; border: 1px solid #d1d5db; padding: 0.75rem 1rem; margin-bottom: 0.5rem; border-radius: 0.5rem; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: background-color 0.3s; }
        .daily-task-game .task-item:hover { background-color: #f3f4f6; }
        .daily-task-game .task-item.completed { background-color: #d1fae5; text-decoration: line-through; color: #065f46; }
        .daily-task-game .task-item.completed .task-icon { color: #059669; }
        .daily-task-game .task-icon { font-size: 1.2rem; color: #6b7280; }

        /* Spot the Difference */
        .spot-difference-game .panels-container { display: flex; justify-content: space-around; align-items: flex-start; margin-bottom: 1rem; gap: 1rem; }
        .spot-difference-game .image-panel { border: 2px solid #93c5fd; border-radius: 0.5rem; padding: 0.5rem; background-color: #fff; display: grid; gap: 0.25rem; user-select: none; }
        .spot-difference-game .spot-item { width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; font-size: 1.8rem; cursor: default; border-radius: 0.25rem; }
        .spot-difference-game .spot-item.clickable { cursor: pointer; }
        .spot-difference-game .spot-item.found-diff { background-color: rgba(255, 255, 0, 0.5); border: 2px solid gold; }

        /* Maze Game */
        .maze-game .maze-grid { display: grid; gap: 1px; border: 2px solid #60a5fa; background-color: #bfdbfe; padding: 4px; margin: 1rem auto; width: fit-content; }
        .maze-game .maze-cell { width: 35px; height: 35px; background-color: #fff; display: flex; justify-content: center; align-items: center; font-size: 1.2rem; cursor: pointer; transition: background-color 0.1s; border: 1px solid #e0f2fe; }
        .maze-game .maze-cell:hover:not(.wall):not(.start):not(.end) { background-color: #dbeafe; }
        .maze-game .maze-cell.wall { background-color: #6b7280; cursor: not-allowed; }
        .maze-game .maze-cell.start { background-color: #6ee7b7; color: #047857 } 
        .maze-game .maze-cell.end { background-color: #f87171; color: #b91c1c }   
        .maze-game .maze-cell.path-taken { background-color: #fde68a; } 
        .maze-game .maze-cell.current-pos { background-color: #fb923c; box-shadow: inset 0 0 0 2px #ea580c; } 
        
        /* Story Sequencing */
        .story-sequencing-game .story-text-area { background-color: #fff; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem; text-align: left; line-height: 1.7; color: #374151; max-height: 150px; overflow-y: auto;}
        .story-sequencing-game .sentence-snippets-container { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1.5rem; min-height: 100px; padding: 0.5rem; background-color: #e0e7ff; border-radius: 0.5rem;}
        .story-sequencing-game .snippet { background-color: #fff; padding: 0.75rem; border: 1px solid #c7d2fe; border-radius: 0.375rem; cursor: grab; user-select: none; transition: background-color 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .story-sequencing-game .snippet:hover { background-color: #f0f9ff; }
        .story-sequencing-game .snippet.dragging { opacity: 0.5; background-color: #eef2ff;}
        .story-sequencing-game .drop-zone { border: 2px dashed #a5b4fc; border-radius: 0.5rem; padding: 1rem; min-height: 100px; background-color: #eef2ff;}
        .story-sequencing-game .drop-zone .snippet { cursor: default; margin-bottom: 0.5rem;}

        /* Pattern Recognition */
        .pattern-recognition-game .pattern-display-area { display: flex; justify-content: center; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem; min-height: 80px; padding: 1rem; background-color: #fff; border-radius: 0.5rem;}
        .pattern-recognition-game .pattern-item { font-size: 2.5rem; width: 50px; height: 50px; display: flex; justify-content: center; align-items: center; border: 1px solid #ddd; border-radius: 0.25rem;}
        .pattern-recognition-game .pattern-options-container { display: flex; justify-content: center; gap: 1rem; margin-top: 1rem; }
        .pattern-recognition-game .pattern-option-button { background-color: #a7f3d0; color: #047857; padding: 0.75rem; border-radius: 0.5rem; font-size: 2rem; width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: background-color 0.2s; border: 1px solid #6ee7b7;}
        .pattern-recognition-game .pattern-option-button:hover { background-color: #6ee7b7;}

        /* Sound Sequence */
        .sound-sequence-game .sound-button-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.75rem; margin: 1.5rem 0;}
        .sound-sequence-game .sound-button { background-color: #fecaca; color: #b91c1c; width: 70px; height: 70px; border-radius: 0.5rem; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.2s, transform 0.1s; border: 1px solid #f87171; display: flex; justify-content: center; align-items: center; flex-direction: column;}
        .sound-sequence-game .sound-button:hover { background-color: #f87171; color:white; }
        .sound-sequence-game .sound-button.playing { transform: scale(1.1); background-color: #dc2626; color:white; }
        .sound-sequence-game .user-sequence-display { min-height: 30px; margin-top: 1rem; font-size: 1.2rem; color: #1e3a8a; letter-spacing: 0.2em;}


        @media (max-width: 768px) { 
            .spot-difference-game .spot-item { width: 30px; height: 30px; font-size: 1.5rem;}
            .maze-game .maze-cell { width: 30px; height: 30px; font-size: 1.2rem; }
        }

        @media (max-width: 640px) {
            .nav-container { flex-direction: column; gap: 0.75rem; }
            .nav-button { width: 100%; justify-content: center; }
            .card-container { grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 0.4rem; }
            .card { font-size: 1.8rem; }
            .header h1 { font-size: 1.75rem; }
            .header p { font-size: 0.9rem; }
            .section-title { font-size: 1.5rem; }
            .game-select-button { padding: 0.7rem 0.8rem; font-size: 0.75rem; width: 100px; height: 85px; } 
            .game-select-button i { font-size: 1.2rem; }
            .game-selection-container { gap: 0.4rem; }
            .game-title { font-size: 1.3rem; }
            .number-sequence-game input[type="text"], .quick-math-game input[type="number"] { width: calc(100% - 110px); }
            .control-button { padding: 0.6rem 1.2rem; font-size: 0.9rem; }
            .color-match-game .color-word-display { font-size: 2.2rem; min-height: 100px; }
            .color-match-game .answer-button { padding: 0.6rem 1.5rem; }
            .difficulty-selector button { padding: 0.3rem 0.6rem; font-size: 0.75rem;}

            .spot-difference-game .panels-container { flex-direction: column; align-items: center; }
            .spot-difference-game .image-panel { max-width: 90%; }
            .maze-game .maze-grid { max-width: 90%; }
            .maze-game .maze-cell { width: 28px; height: 28px; font-size: 1rem; }

            .story-sequencing-game .story-text-area { max-height: 120px; font-size: 0.9rem;}
            .story-sequencing-game .snippet {padding: 0.6rem; font-size: 0.85rem;}
            .pattern-recognition-game .pattern-item {font-size: 2rem; width: 40px; height: 40px;}
            .pattern-recognition-game .pattern-option-button {font-size: 1.8rem; width: 50px; height: 50px;}
            .sound-sequence-game .sound-button {width: 60px; height: 60px; font-size: 0.9rem;}
        }
         @media (max-width: 400px) { /* Further adjust for very small screens */
            .game-select-button { width: calc(50% - 0.4rem); height: 90px; } 
            .maze-game .maze-cell { width: 24px; height: 24px; font-size: 0.9rem; }
            .spot-difference-game .spot-item { width: 25px; height: 25px; font-size: 1.2rem;}

         }
    </style>
</head>
<body class="bg-blue-50 min-h-screen flex flex-col">

    <header class="header w-full">
        <h1><i class="fas fa-brain"></i> æ™ºå…»äº‘</h1>
        <p>ä¸­å›½OMOé˜¿å°”èŒ¨æµ·é»˜ç—‡ç¾¤ä½“å®ˆæŠ¤è€…</p>
    </header>

    <nav class="w-full max-w-4xl mx-auto p-4">
        <div class="flex flex-wrap justify-center gap-3 nav-container">
            <a href="#home" class="nav-button"><i class="fas fa-home"></i> é¦–é¡µä»‹ç»</a>
            <a href="#games-hub" class="nav-button"><i class="fas fa-puzzle-piece"></i> è®¤çŸ¥æ¸¸æˆä¸­å¿ƒ</a>
            <a href="#omo" class="nav-button"><i class="fas fa-users"></i> OMOèåˆ</a>
            <a href="#resources" class="nav-button"><i class="fas fa-book-medical"></i> å¥åº·èµ„è®¯</a>
        </div>
    </nav>

    <main class="w-full max-w-4xl mx-auto p-4 md:p-6 flex-grow">
        <section id="home" class="mb-8 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="section-title"><i class="fas fa-info-circle"></i> æ¬¢è¿æ¥åˆ°æ™ºå…»äº‘</h2>
            <div class="info-box">
                <p class="text-gray-700 leading-relaxed">
                    â€œæ™ºå…»äº‘â€æ˜¯ä¸€ä¸ªè‡´åŠ›äºé€šè¿‡çº¿ä¸Šäº’åŠ¨ä¸çº¿ä¸‹å…³æ€€ç›¸ç»“åˆï¼ˆOMOæ¨¡å¼ï¼‰ï¼Œä¸ºé˜¿å°”èŒ¨æµ·é»˜ç—‡æ‚£è€…åŠå…¶å®¶åº­æä¾›å…¨æ–¹ä½æ”¯æŒçš„å¹³å°ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ç§‘æŠ€çš„åŠ›é‡ï¼Œå»¶ç¼“ç—…ç¨‹å‘å±•ï¼Œæå‡æ‚£è€…ç”Ÿæ´»è´¨é‡ï¼Œå¹¶ä¸ºç…§æŠ¤è€…æä¾›æœ‰æ•ˆçš„å¸®åŠ©å’Œèµ„æºã€‚
                </p>
            </div>
        </section>

        <section id="games-hub" class="mb-8 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="section-title"><i class="fas fa-gamepad"></i> è®¤çŸ¥æ¸¸æˆä¸­å¿ƒ</h2>
            <div class="info-box">
                <p>é€‰æ‹©ä¸€æ¬¾å°æ¸¸æˆï¼Œå¼€å§‹æ‚¨çš„è®¤çŸ¥é”»ç‚¼ä¹‹æ—…å§ï¼è¿™äº›æ¸¸æˆæ—¨åœ¨å¸®åŠ©æé«˜è®°å¿†åŠ›ã€æ³¨æ„åŠ›å’Œæ‰§è¡ŒåŠŸèƒ½ã€‚</p>
            </div>

            <div id="game-selection" class="game-selection-container">
                <button class="game-select-button" data-game="memory-match"><i class="fas fa-clone"></i>è®°å¿†åŒ¹é…</button>
                <button class="game-select-button" data-game="object-recognition"><i class="fas fa-eye"></i>ç‰©å“è¯†åˆ«</button>
                <button class="game-select-button" data-game="number-sequence"><i class="fas fa-sort-numeric-down"></i>æ•°å­—åºåˆ—</button>
                <button class="game-select-button" data-game="quick-math"><i class="fas fa-calculator"></i>é€Ÿç®—æŒ‘æˆ˜</button>
                <button class="game-select-button" data-game="color-match"><i class="fas fa-palette"></i>é¢œè‰²åŒ¹é…</button>
                <button class="game-select-button" data-game="daily-task"><i class="fas fa-tasks"></i>æ¯æ—¥ä»»åŠ¡</button>
                <button class="game-select-button" data-game="spot-difference"><i class="fas fa-search-plus"></i>å¤§å®¶æ¥æ‰¾èŒ¬</button>
                <button class="game-select-button" data-game="maze-game"><i class="fas fa-route"></i>è¿·å®«å¯»è·¯</button>
                <button class="game-select-button" data-game="story-sequencing"><i class="fas fa-stream"></i>æ•…äº‹æ’åº</button>
                <button class="game-select-button" data-game="pattern-recognition"><i class="fas fa-shapes"></i>å›¾å½¢è§„å¾‹</button>
                <button class="game-select-button" data-game="sound-sequence"><i class="fas fa-music"></i>å£°éŸ³åºåˆ—</button>
            </div>

            <div id="game-active-area" class="game-area">
                <div id="memory-match-game" class="game-content">
                    <h3 class="game-title">è®°å¿†åŒ¹é…æŒ‘æˆ˜</h3>
                    <p class="game-description">ç‚¹å‡»å¡ç‰‡ï¼Œæ‰¾å‡ºæ‰€æœ‰åŒ¹é…çš„å›¾æ¡ˆï¼</p>
                    <div class="difficulty-selector" id="memory-difficulty-selector">
                        éš¾åº¦: 
                        <button data-difficulty="easy">ç®€å• (4x2)</button>
                        <button data-difficulty="medium" class="selected">ä¸­ç­‰ (4x4)</button>
                        <button data-difficulty="hard">å›°éš¾ (5x4)</button>
                    </div>
                    <div class="timer-display" id="memory-timer-display" style="display:none;">æ—¶é—´: <span id="memory-time">0</span> ç§’</div>
                    <div id="memory-game-board" class="card-container"></div>
                    <div class="text-center">
                        <p id="memory-status-message" class="status-message">é€‰æ‹©éš¾åº¦å¹¶å¼€å§‹</p>
                        <button id="memory-reset-button" class="control-button"><i class="fas fa-redo"></i> é‡æ–°å¼€å§‹</button>
                        <p class="mt-2 text-sm text-gray-600">å·²åŒ¹é…: <span id="memory-pairs-matched">0</span> å¯¹ | å°è¯•æ¬¡æ•°: <span id="memory-attempts">0</span></p>
                    </div>
                </div>

                <div id="object-recognition-game" class="game-content object-recognition-game">
                    <h3 class="game-title">ç‰©å“è¯†åˆ«æ¸¸æˆ</h3>
                    <p class="game-description">çœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆç‰©å“ï¼Ÿé€‰æ‹©æ­£ç¡®çš„åç§°ã€‚</p>
                    <div id="object-display" class="image-display">â“</div>
                    <div id="object-options-container" class="options-container"></div>
                    <p id="object-status-message" class="status-message">è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚</p>
                    <button id="object-next-button" class="control-button" style="display:none;"><i class="fas fa-arrow-right"></i> ä¸‹ä¸€é¢˜</button>
                     <p class="mt-2 text-sm text-gray-600">å¾—åˆ†: <span id="object-score">0</span></p>
                </div>

                <div id="number-sequence-game" class="game-content number-sequence-game">
                    <h3 class="game-title">æ•°å­—åºåˆ—è®°å¿†</h3>
                    <p class="game-description">è®°ä½å±å¹•ä¸Šå‡ºç°çš„æ•°å­—ï¼Œç„¶ååœ¨è§„å®šæ—¶é—´å†…æŒ‰é¡ºåºè¾“å…¥ã€‚</p>
                    <div class="timer-display">å‰©ä½™æ—¶é—´: <span id="number-sequence-timer-value">10</span> ç§’</div>
                    <div class="number-sequence-timer-bar-container my-2">
                        <div id="number-sequence-timer-bar" class="timer-bar"></div>
                    </div>
                    <div id="number-sequence-display-area" class="number-display-area">ç‚¹å‡»å¼€å§‹</div>
                    <div class="text-center mt-4">
                        <input type="text" placeholder="è¯·è¾“å…¥æ•°å­—åºåˆ—" id="number-sequence-input" class="text-lg" disabled>
                        <button id="number-sequence-submit-button" class="control-button" disabled><i class="fas fa-check"></i> æäº¤</button>
                    </div>
                    <button id="number-sequence-start-button" class="control-button"><i class="fas fa-play"></i> å¼€å§‹ / ä¸‹ä¸€ç»„</button>
                    <p id="number-sequence-status-message" class="status-message">å‡†å¤‡å¥½äº†å—ï¼Ÿ</p>
                    <p class="mt-2 text-sm text-gray-600">å½“å‰é•¿åº¦: <span id="number-sequence-length">3</span> | æ­£ç¡®æ¬¡æ•°: <span id="number-sequence-correct">0</span></p>
                </div>

                <div id="quick-math-game" class="game-content quick-math-game">
                    <h3 class="game-title">é€Ÿç®—æŒ‘æˆ˜</h3>
                    <p class="game-description">å¿«é€Ÿè®¡ç®—å‡ºä¸‹é¢ç®—å¼çš„ç»“æœã€‚</p>
                     <div class="difficulty-selector" id="quick-math-difficulty-selector">
                        éš¾åº¦: 
                        <button data-difficulty="easy" class="selected">ç®€å•</button>
                        <button data-difficulty="medium">ä¸­ç­‰</button>
                        <button data-difficulty="hard">å›°éš¾</button>
                    </div>
                    <div class="timer-display">å‰©ä½™æ—¶é—´: <span id="quick-math-timer-value">15</span> ç§’</div>
                    <div id="quick-math-problem-display" class="problem-display">é€‰æ‹©éš¾åº¦å¹¶å¼€å§‹</div>
                    <div class="text-center mt-4">
                        <input type="number" placeholder="è¾“å…¥ç­”æ¡ˆ" id="quick-math-input" class="text-lg" disabled>
                        <button id="quick-math-submit-button" class="control-button" disabled><i class="fas fa-check"></i> æäº¤</button>
                    </div>
                     <button id="quick-math-start-button" class="control-button"><i class="fas fa-play"></i> å¼€å§‹ / ä¸‹ä¸€é¢˜</button>
                    <p id="quick-math-status-message" class="status-message">æ¥æŒ‘æˆ˜ä¸€ä¸‹å§ï¼</p>
                    <p class="mt-2 text-sm text-gray-600">å¾—åˆ†: <span id="quick-math-score">0</span></p>
                </div>

                <div id="color-match-game" class="game-content color-match-game">
                    <h3 class="game-title">é¢œè‰²åŒ¹é…æŒ‘æˆ˜</h3>
                    <p class="game-description">è¯è¯­çš„å«ä¹‰å’Œå®ƒæ˜¾ç¤ºçš„é¢œè‰²åŒ¹é…å—ï¼Ÿå¿«é€Ÿåšå‡ºåˆ¤æ–­ï¼</p>
                    <div class="timer-display">å‰©ä½™æ—¶é—´: <span id="color-match-timer-value">5</span> ç§’</div>
                    <div id="color-match-word-display" class="color-word-display">ç‚¹å‡»å¼€å§‹</div>
                    <div class="answer-buttons">
                        <button id="color-match-true-button" class="answer-button match" disabled><i class="fas fa-check-circle"></i> åŒ¹é…</button>
                        <button id="color-match-false-button" class="answer-button no-match" disabled><i class="fas fa-times-circle"></i> ä¸åŒ¹é…</button>
                    </div>
                    <button id="color-match-start-button" class="control-button"><i class="fas fa-play"></i> å¼€å§‹ / ä¸‹ä¸€é¢˜</button>
                    <p id="color-match-status-message" class="status-message">å‡†å¤‡æŒ‘æˆ˜ï¼</p>
                    <p class="mt-2 text-sm text-gray-600">å¾—åˆ†: <span id="color-match-score">0</span></p>
                </div>
                
                <div id="daily-task-game" class="game-content daily-task-game">
                    <h3 class="game-title">æ¯æ—¥ä»»åŠ¡æ¸…å•</h3>
                    <p class="game-description">ç‚¹å‡»ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆã€‚å…»æˆå¥½ä¹ æƒ¯ï¼</p>
                    <ul id="daily-task-list" class="task-list"></ul>
                    <p id="daily-task-status-message" class="status-message">ä»Šå¤©å·²å®Œæˆ <span id="daily-task-completed-count">0</span> é¡¹ä»»åŠ¡ã€‚</p>
                    <button id="daily-task-reset-button" class="control-button"><i class="fas fa-sync-alt"></i> é‡ç½®æ–°ä¸€å¤©ä»»åŠ¡</button>
                </div>

                <div id="spot-difference-game" class="game-content spot-difference-game">
                    <h3 class="game-title">å¤§å®¶æ¥æ‰¾èŒ¬</h3>
                    <p class="game-description">åœ¨å³è¾¹çš„å›¾æ¡ˆä¸­æ‰¾å‡ºä¸å·¦è¾¹ä¸åŒçš„åœ°æ–¹ï¼Œç‚¹å‡»å®ƒä»¬ï¼</p>
                    <div class="panels-container">
                        <div id="spot-diff-panel-left" class="image-panel"></div>
                        <div id="spot-diff-panel-right" class="image-panel"></div>
                    </div>
                    <p id="spot-difference-status-message" class="status-message">æ‰¾åˆ° <span id="spot-diff-found-count">0</span> / <span id="spot-diff-total-count">0</span> ä¸ªä¸åŒç‚¹ã€‚</p>
                    <button id="spot-difference-reset-button" class="control-button"><i class="fas fa-redo"></i> æ–°ä¸€ç»„å›¾æ¡ˆ</button>
                </div>

                <div id="maze-game-game" class="game-content maze-game"> <h3 class="game-title">è¿·å®«å¯»è·¯</h3>
                    <p class="game-description">ç‚¹å‡»æ ¼å­ï¼Œä» <span class="text-green-600 font-bold">ç»¿è‰²èµ·ç‚¹</span> èµ°åˆ° <span class="text-red-600 font-bold">çº¢è‰²ç»ˆç‚¹</span>ï¼Œé¿å¼€ç°è‰²éšœç¢ç‰©ã€‚</p>
                    <div id="maze-grid-container" class="maze-grid"></div>
                    <p id="maze-status-message" class="status-message">è¯·å¼€å§‹å¯»è·¯ã€‚</p>
                    <button id="maze-reset-button" class="control-button"><i class="fas fa-redo"></i> é‡æ–°ç”Ÿæˆè¿·å®«</button>
                     <p class="mt-2 text-sm text-gray-600">æ­¥æ•°: <span id="maze-moves-count">0</span></p>
                </div>

                <div id="story-sequencing-game" class="game-content story-sequencing-game">
                    <h3 class="game-title">æ•…äº‹æ’åº</h3>
                    <p class="game-description">è¯·é˜…è¯»ä¸‹é¢çš„æ•…äº‹ï¼Œç„¶åå°†æ‰“ä¹±çš„å¥å­æ‹–æ‹½åˆ°ä¸‹æ–¹æ¡†å†…ï¼ŒæŒ‰æ­£ç¡®é¡ºåºæ’åˆ—ã€‚</p>
                    <div id="story-text-area" class="story-text-area">æ•…äº‹åŠ è½½ä¸­...</div>
                    <div id="sentence-snippets-container" class="sentence-snippets-container">å°†å¥å­æ‹–åˆ°è¿™é‡Œ</div> <div id="story-drop-zone" class="drop-zone"></div>
                    <button id="story-submit-button" class="control-button"><i class="fas fa-check"></i> æäº¤ç­”æ¡ˆ</button>
                    <p id="story-status-message" class="status-message">è¯·æ’åˆ—å¥å­ã€‚</p>
                </div>

                <div id="pattern-recognition-game" class="game-content pattern-recognition-game">
                    <h3 class="game-title">å›¾å½¢è§„å¾‹è¯†åˆ«</h3>
                    <p class="game-description">è§‚å¯Ÿä¸‹é¢çš„åºåˆ—ï¼Œæ‰¾å‡ºè§„å¾‹ï¼Œå¹¶é€‰æ‹©ä¸‹ä¸€ä¸ªæ­£ç¡®çš„å›¾æ¡ˆã€‚</p>
                    <div id="pattern-display-area" class="pattern-display-area">å›¾æ¡ˆåŠ è½½ä¸­...</div>
                    <div id="pattern-options-container" class="pattern-options-container"></div>
                    <button id="pattern-next-button" class="control-button"><i class="fas fa-arrow-right"></i> ä¸‹ä¸€é¢˜</button>
                    <p id="pattern-status-message" class="status-message">è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚</p>
                    <p class="mt-2 text-sm text-gray-600">å¾—åˆ†: <span id="pattern-score">0</span></p>
                </div>

                <div id="sound-sequence-game" class="game-content sound-sequence-game">
                    <h3 class="game-title">å£°éŸ³åºåˆ—è®°å¿†</h3>
                    <p class="game-description">ç‚¹å‡»â€œæ’­æ”¾åºåˆ—â€è†å¬å£°éŸ³ï¼Œç„¶åæŒ‰é¡ºåºç‚¹å‡»ä¸‹æ–¹æŒ‰é’®é‡ç°åºåˆ—ã€‚</p>
                    <button id="sound-play-sequence-button" class="control-button"><i class="fas fa-volume-up"></i> æ’­æ”¾åºåˆ—</button>
                    <div id="sound-button-container" class="sound-button-container">
                        </div>
                    <div id="sound-user-sequence-display" class="user-sequence-display"></div>
                    <button id="sound-submit-button" class="control-button" disabled><i class="fas fa-check"></i> æäº¤ç­”æ¡ˆ</button>
                    <p id="sound-status-message" class="status-message">å‡†å¤‡è†å¬ã€‚</p>
                     <p class="mt-2 text-sm text-gray-600">å½“å‰é•¿åº¦: <span id="sound-sequence-length-display">3</span> | å¾—åˆ†: <span id="sound-score-display">0</span></p>
                </div>


                <div id="no-game-selected" class="game-content active text-center py-10">
                    <p class="text-lg text-gray-500"><i class="fas fa-hand-pointer fa-2x mb-3"></i><br>è¯·ä»ä¸Šæ–¹é€‰æ‹©ä¸€ä¸ªæ¸¸æˆå¼€å§‹ã€‚</p>
                </div>
            </div>
        </section>

        <section id="omo" class="mb-8 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="section-title"><i class="fas fa-hands-helping"></i> OMO çº¿ä¸Šçº¿ä¸‹èåˆ</h2>
            <div class="info-box">
                <h3>æˆ‘ä»¬çš„OMOç†å¿µ</h3>
                <p>
                    â€œæ™ºå…»äº‘â€ä¸ä»…æä¾›çº¿ä¸Šè®¤çŸ¥è®­ç»ƒå·¥å…·ï¼Œæ›´è‡´åŠ›äºæ­å»ºè¿æ¥æ‚£è€…ã€å®¶åº­ã€åŒ»ç–—æœºæ„å’Œç¤¾åŒºèµ„æºçš„æ¡¥æ¢ï¼Œå®ç°çº¿ä¸Šä¾¿æ·ä¸çº¿ä¸‹å…³æ€€çš„æ·±åº¦èåˆã€‚
                </p>
                <div class="sub-section">
                    <h4><i class="fas fa-laptop-medical mr-2"></i>çº¿ä¸ŠæœåŠ¡</h4>
                    <ul class="list-disc space-y-1">
                        <li><strong>è®¤çŸ¥è¯„ä¼°ä¸è¿½è¸ªï¼š</strong> å®šæœŸé€šè¿‡Appå†…çš„äº’åŠ¨æ¸¸æˆå’Œè¯„ä¼°å·¥å…·ç›‘æµ‹è®¤çŸ¥çŠ¶å†µï¼Œç”Ÿæˆç®€æŠ¥ä¾›å®¶äººæˆ–ä¸“ä¸šäººå£«å‚è€ƒã€‚</li>
                        <li><strong>ä¸ªæ€§åŒ–è®­ç»ƒè®¡åˆ’ï¼š</strong> æ ¹æ®è¯„ä¼°ç»“æœï¼Œæ¨èåˆé€‚çš„è®¤çŸ¥æ¸¸æˆç»„åˆå’Œè®­ç»ƒå¼ºåº¦ã€‚(åŠŸèƒ½è§„åˆ’ä¸­)</li>
                        <li><strong>å®¶åº­æ”¯æŒåœˆï¼š</strong> å»ºç«‹å®¶åº­æˆå‘˜é—´çš„ç§å¯†æ²Ÿé€šå¹³å°ï¼Œåˆ†äº«ç…§æŠ¤ç»éªŒã€ç®¡ç†æ‚£è€…æ—¥ç¨‹ã€è·å–ä¸“ä¸šæŒ‡å¯¼ã€‚(åŠŸèƒ½è§„åˆ’ä¸­)</li>
                        <li><strong>å¥åº·çŸ¥è¯†æ™®åŠï¼š</strong> æä¾›æ˜“äºç†è§£çš„é˜¿å°”èŒ¨æµ·é»˜ç—‡ç›¸å…³ç§‘æ™®æ–‡ç« ã€è§†é¢‘å’Œæ’­å®¢ã€‚</li>
                    </ul>
                </div>
                <div class="sub-section">
                    <h4><i class="fas fa-hospital-user mr-2"></i>çº¿ä¸‹æ”¯æŒ</h4>
                    <ul class="list-disc space-y-1">
                        <li><strong>ç¤¾åŒºæ´»åŠ¨èµ„æºå¯¹æ¥ï¼š</strong> æ•´åˆå¹¶æ¨èé™„è¿‘çš„è®°å¿†å’–å•¡é¦†ã€è‰ºæœ¯æ²»ç–—å°ç»„ã€éŸ³ä¹ç–—æ³•ã€å¤ªææ‹³ç­ç­‰æœ‰ç›Šèº«å¿ƒçš„ç¤¾åŒºæ´»åŠ¨ã€‚</li>
                        <li><strong>ä¸“ä¸šåŒ»ç–—æœºæ„å¯¼èˆªï¼š</strong> æä¾›åˆä½œçš„ç¥ç»ç§‘ã€è€å¹´ç§‘ã€åº·å¤ç§‘ç­‰åŒ»ç–—æœºæ„ä¿¡æ¯ï¼ŒååŠ©é¢„çº¦å’¨è¯¢å’Œæ—©æœŸç­›æŸ¥ã€‚(åŠŸèƒ½è§„åˆ’ä¸­)</li>
                        <li><strong>ç…§æŠ¤è€…åŸ¹è®­ä¸çŸ­æœŸæ›¿ä»£ç…§æŠ¤æœåŠ¡ï¼š</strong> é“¾æ¥çº¿ä¸‹ç…§æŠ¤æŠ€èƒ½åŸ¹è®­è¯¾ç¨‹èµ„æºï¼Œæä¾›çŸ­æœŸæ›¿ä»£ç…§æŠ¤ä¿¡æ¯ã€‚(åŠŸèƒ½è§„åˆ’ä¸­)</li>
                        <li><strong>å¿—æ„¿è€…æœåŠ¡åŒ¹é…ï¼š</strong> æ­å»ºå¹³å°ï¼Œä¸ºæœ‰éœ€è¦çš„å®¶åº­åŒ¹é…ç»è¿‡åŸ¹è®­çš„é™ªä¼´å’Œæ”¯æŒå¿—æ„¿è€…ã€‚(åŠŸèƒ½è§„åˆ’ä¸­)</li>
                    </ul>
                </div>
                 <div class="sub-section">
                    <h4><i class="fas fa-people-arrows mr-2"></i>èåˆæ¨¡å¼äº®ç‚¹</h4>
                     <p>é€šè¿‡OMOæ¨¡å¼ï¼Œæˆ‘ä»¬æ—¨åœ¨ï¼š</p>
                    <ul class="list-disc space-y-1">
                        <li><strong>æå‡æ—©æœŸç­›æŸ¥ä¸å¹²é¢„çš„å¯åŠæ€§ã€‚</strong></li>
                        <li><strong>ä¸ºæ‚£è€…æä¾›æŒç»­çš„ã€ä¸ªæ€§åŒ–çš„è®¤çŸ¥åˆºæ¿€ä¸åº·å¤æ”¯æŒã€‚</strong></li>
                        <li><strong>å‡è½»å®¶åº­ç…§æŠ¤è€…çš„è´Ÿæ‹…ï¼Œæä¾›æƒ…æ„Ÿä¸æŠ€èƒ½æ”¯æŒã€‚</strong></li>
                        <li><strong>æ„å»ºä¸€ä¸ªå……æ»¡å…³çˆ±ã€ç†è§£å’Œæ”¯æŒçš„ç¤¾ä¼šç¯å¢ƒã€‚</strong></li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="resources" class="mb-8 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="section-title"><i class="fas fa-notes-medical"></i> å¥åº·èµ„è®¯ä¸ç…§æŠ¤æŒ‡å—</h2>
            <div class="info-box">
                <p class="mb-4">
                    äº†è§£é˜¿å°”èŒ¨æµ·é»˜ç—‡ï¼Œå­¦ä¹ æœ‰æ•ˆçš„ç…§æŠ¤æ–¹æ³•ï¼Œä¸æˆ‘ä»¬ä¸€èµ·ä¸ºæ‚£è€…å’Œå®¶åº­æä¾›æ”¯æŒã€‚æœ¬ç‰ˆå—å†…å®¹å°†æŒç»­æ›´æ–°ã€‚
                </p>
                <div class="sub-section">
                    <h4><i class="fas fa-disease mr-2"></i>è®¤è¯†é˜¿å°”èŒ¨æµ·é»˜ç—‡</h4>
                    <ul class="list-disc space-y-1">
                        <li><a href="#" class="text-blue-600 hover:underline">é˜¿å°”èŒ¨æµ·é»˜ç—‡çš„10ä¸ªæ—©æœŸä¿¡å· (æ–‡ç« )</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">ç–¾ç—…çš„ä¸åŒé˜¶æ®µåŠå…¶ç‰¹ç‚¹ (å›¾æ–‡ä»‹ç»)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">å¦‚ä½•åŒºåˆ†æ­£å¸¸çš„è¡°è€ä¸è®¤çŸ¥éšœç¢ï¼Ÿ (ç§‘æ™®è§†é¢‘)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">è¯Šæ–­æµç¨‹ç®€ä»‹ (æ–‡ç« )</a></li>
                    </ul>
                </div>
                <div class="sub-section">
                    <h4><i class="fas fa-hands-helping mr-2"></i>æ—¥å¸¸ç…§æŠ¤æŠ€å·§</h4>
                    <ul class="list-disc space-y-1">
                        <li><a href="#" class="text-blue-600 hover:underline">ä¸è®¤çŸ¥éšœç¢æ‚£è€…æœ‰æ•ˆæ²Ÿé€šçš„æŠ€å·§ (æŒ‡å—)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">è¥é€ å®‰å…¨çš„å±…å®¶ç¯å¢ƒï¼šæ¸…å•ä¸å»ºè®® (æ–‡ç« )</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">å¦‚ä½•åº”å¯¹æ¸¸èµ°ã€çƒ¦èºç­‰æŒ‘æˆ˜æ€§è¡Œä¸ºï¼Ÿ (ç­–ç•¥åˆ†äº«)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">ååŠ©ä¸ªäººå«ç”Ÿä¸ç©¿ç€çš„æ³¨æ„äº‹é¡¹ (å®ç”¨æŠ€å·§)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">é¼“åŠ±å‚ä¸æ—¥å¸¸æ´»åŠ¨ï¼Œç»´æŒç”Ÿæ´»åŠŸèƒ½ (æ¡ˆä¾‹)</a></li>
                    </ul>
                </div>
                <div class="sub-section">
                    <h4><i class="fas fa-apple-alt mr-2"></i>è¥å…»ä¸å¥åº·ç”Ÿæ´»æ–¹å¼</h4>
                    <ul class="list-disc space-y-1">
                        <li><a href="#" class="text-blue-600 hover:underline">â€œå¥è„‘é¥®é£Ÿâ€ï¼šåœ°ä¸­æµ·é¥®é£Ÿä¸MINDé¥®é£Ÿä»‹ç» (é£Ÿè°±æ¨è)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">ä¿æŒè§„å¾‹è¿åŠ¨å¯¹å¤§è„‘å¥åº·çš„ç›Šå¤„ (è¿åŠ¨æŒ‡å—)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">ä¿è¯å……è¶³ç¡çœ çš„é‡è¦æ€§ (æ–‡ç« )</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">ç¤¾äº¤äº’åŠ¨ä¸è®¤çŸ¥åˆºæ¿€ï¼šå¦‚ä½•ä¿æŒå¤§è„‘æ´»åŠ› (æ´»åŠ¨å»ºè®®)</a></li>
                    </ul>
                </div>
                <div class="sub-section">
                    <h4><i class="fas fa-newspaper mr-2"></i>æœ€æ–°ç ”ç©¶ä¸è¿›å±•</h4>
                     <p><em>ï¼ˆæ­¤ç‰ˆå—å°†å®šæœŸæ›´æ–°é˜¿å°”èŒ¨æµ·é»˜ç—‡é¢†åŸŸçš„å‰æ²¿ç ”ç©¶å’Œæ²»ç–—è¿›å±•ï¼Œæ•¬è¯·æœŸå¾…ã€‚ï¼‰</em></p>
                </div>
                <div class="sub-section">
                    <h4><i class="fas fa-tools mr-2"></i>å®ç”¨å·¥å…·ä¸èµ„æºä¸‹è½½</h4>
                    <ul class="list-disc space-y-1">
                        <li><a href="#" class="text-blue-600 hover:underline">ç´§æ€¥è”ç³»ä¿¡æ¯å¡ (æ¨¡æ¿ä¸‹è½½)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">ç”¨è¯ç®¡ç†æ¸…å• (æ¨¡æ¿ä¸‹è½½)</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline">æœ¬åœ°ç¤¾åŒºæ”¯æŒæœåŠ¡è”ç³»æ–¹å¼ (æŒç»­æ›´æ–°)</a></li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="w-full bg-gray-800 text-white text-center p-6 rounded-t-xl mt-auto">
        <p>&copy; 2025 æ™ºå…»äº‘. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        <p class="text-sm mt-1">â€”â€”â€”â€”å¹¿ä¸œåŒ»ç§‘å¤§å­¦æ™ºå…»äº‘å›¢é˜Ÿ</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Game Switching Logic ---
        const gameSelectButtons = document.querySelectorAll('.game-select-button');
        const gameContents = document.querySelectorAll('.game-content');
        const noGameSelectedMessage = document.getElementById('no-game-selected');
        let activeGameModule = null;

        function setActiveGame(selectedGameId) {
            gameContents.forEach(content => content.classList.remove('active'));
            gameSelectButtons.forEach(button => button.classList.remove('active'));

            // Corrected ID formation for game content divs
            const activeGameContent = document.getElementById(selectedGameId + "-game"); 
            const activeButton = document.querySelector(`.game-select-button[data-game="${selectedGameId}"]`);
            
            if (activeGameModule && typeof activeGameModule.cleanup === 'function') {
                activeGameModule.cleanup(); 
            }

            if (activeGameContent) {
                activeGameContent.classList.add('active');
                noGameSelectedMessage.classList.remove('active');
                if (activeButton) activeButton.classList.add('active');
                
                switch (selectedGameId) {
                    case 'memory-match': activeGameModule = memoryGameModule; break;
                    case 'object-recognition': activeGameModule = objectRecognitionGameModule; break;
                    case 'number-sequence': activeGameModule = numberSequenceGameModule; break;
                    case 'quick-math': activeGameModule = quickMathGameModule; break;
                    case 'color-match': activeGameModule = colorMatchGameModule; break;
                    case 'daily-task': activeGameModule = dailyTaskGameModule; break;
                    case 'spot-difference': activeGameModule = spotDifferenceGameModule; break;
                    case 'maze-game': activeGameModule = mazeGameModule; break; 
                    case 'story-sequencing': activeGameModule = storySequencingGameModule; break;
                    case 'pattern-recognition': activeGameModule = patternRecognitionGameModule; break;
                    case 'sound-sequence': activeGameModule = soundSequenceGameModule; break;
                    default: activeGameModule = null;
                }
                if (activeGameModule && typeof activeGameModule.init === 'function') {
                    try {
                        activeGameModule.init(); 
                    } catch (error) {
                        console.error("Error initializing game module:", selectedGameId, error);
                        noGameSelectedMessage.textContent = `åŠ è½½æ¸¸æˆ "${selectedGameId}" å‡ºé”™ã€‚è¯·é‡è¯•æˆ–é€‰æ‹©å…¶ä»–æ¸¸æˆã€‚`;
                        noGameSelectedMessage.classList.add('active');
                        activeGameContent.classList.remove('active'); 
                        if (activeButton) activeButton.classList.remove('active');
                    }
                } else if (activeGameModule) {
                     console.warn("Game module selected but no init function found:", selectedGameId);
                }

            } else {
                noGameSelectedMessage.textContent = "è¯·ä»ä¸Šæ–¹é€‰æ‹©ä¸€ä¸ªæ¸¸æˆå¼€å§‹ã€‚"; 
                noGameSelectedMessage.classList.add('active');
                activeGameModule = null;
                 console.warn("No active game content found for ID:", selectedGameId + "-game");
            }
        }
        
        gameSelectButtons.forEach(button => {
            button.addEventListener('click', () => {
                const gameId = button.dataset.game;
                setActiveGame(gameId);
            });
        });

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        const memoryGameModule = (() => {
            const gameBoard = document.getElementById('memory-game-board');
            const statusMessage = document.getElementById('memory-status-message');
            const resetButton = document.getElementById('memory-reset-button');
            const pairsMatchedDisplay = document.getElementById('memory-pairs-matched');
            const attemptsDisplay = document.getElementById('memory-attempts');
            const difficultySelector = document.getElementById('memory-difficulty-selector');
            const timerDisplay = document.getElementById('memory-timer-display');
            const timeDisplaySpan = document.getElementById('memory-time');
            const baseEmojis = ['ğŸ', 'ğŸŒ', 'ğŸ’', 'ğŸ‡', 'ğŸ“', 'ğŸ¥', 'ğŸ', 'ğŸ¥­', 'ğŸ‘', 'ğŸ‰', 'ğŸ¥¥', 'ğŸ‹']; 
            let currentEmojis = [];
            let cards = []; 
            let flippedCards = []; 
            let matchedPairs = 0;
            let attempts = 0;
            let lockBoard = false; 
            let initialized = false;
            let difficulty = 'medium'; 
            let gameTimerInterval = null;
            let secondsElapsed = 0;
            const difficultySettings = {
                easy: { pairs: 4, columns: 4, emojis: baseEmojis.slice(0, 4) },    
                medium: { pairs: 8, columns: 4, emojis: baseEmojis.slice(0, 8) }, 
                hard: { pairs: 10, columns: 5, emojis: baseEmojis.slice(0, 10) }  
            };

            function startTimer() {
                stopTimer(); 
                secondsElapsed = 0;
                timeDisplaySpan.textContent = secondsElapsed;
                timerDisplay.style.display = 'block';
                gameTimerInterval = setInterval(() => {
                    secondsElapsed++;
                    timeDisplaySpan.textContent = secondsElapsed;
                }, 1000);
            }
            function stopTimer() {
                clearInterval(gameTimerInterval);
                gameTimerInterval = null;
            }
            function createBoard() {
                stopTimer(); 
                timerDisplay.style.display = 'none';
                gameBoard.innerHTML = ''; 
                statusMessage.textContent = 'å°è¯•ç¿»å¼€ä¸¤å¼ å¡ç‰‡';
                statusMessage.className = 'status-message text-blue-700'; 
                matchedPairs = 0;
                attempts = 0;
                updateStats();
                flippedCards = [];
                lockBoard = false;
                const settings = difficultySettings[difficulty];
                currentEmojis = settings.emojis;
                gameBoard.style.gridTemplateColumns = `repeat(${settings.columns}, minmax(0, 1fr))`; 
                if (difficulty === 'hard') {
                    gameBoard.classList.add('gap-px'); 
                } else {
                     gameBoard.classList.remove('gap-px');
                }
                const cardValues = [...currentEmojis, ...currentEmojis]; 
                shuffleArray(cardValues); 
                cardValues.forEach(value => {
                    const cardElement = document.createElement('div');
                    cardElement.classList.add('card');
                    cardElement.dataset.value = value; 
                    const cardInner = document.createElement('div');
                    cardInner.classList.add('card-inner');
                    const cardFront = document.createElement('div');
                    cardFront.classList.add('card-front'); 
                    const cardBack = document.createElement('div');
                    cardBack.classList.add('card-back'); 
                    cardBack.textContent = value;
                    cardInner.appendChild(cardFront);
                    cardInner.appendChild(cardBack);
                    cardElement.appendChild(cardInner);
                    cardElement.addEventListener('click', handleCardClick); 
                    gameBoard.appendChild(cardElement);
                });
                cards = gameBoard.querySelectorAll('.card'); 
            }
            function handleCardClick(event) {
                if (lockBoard || matchedPairs === difficultySettings[difficulty].pairs) return;
                const clickedCard = event.currentTarget;
                if (clickedCard.classList.contains('flipped') || clickedCard.classList.contains('matched')) return;
                if (flippedCards.length === 0 && matchedPairs === 0 && attempts === 0) {
                    startTimer(); 
                }
                flipCard(clickedCard); 
                flippedCards.push(clickedCard); 
                if (flippedCards.length === 2) {
                    attempts++;
                    updateStats();
                    lockBoard = true; 
                    checkForMatch(); 
                }
            }
            function flipCard(card) { card.classList.add('flipped'); } 
            function unflipCards() {
                setTimeout(() => {
                    flippedCards.forEach(card => card.classList.remove('flipped'));
                    flippedCards = []; 
                    lockBoard = false; 
                    statusMessage.textContent = 'ä¸åŒ¹é…ï¼Œå†è¯•è¯•çœ‹ã€‚';
                    statusMessage.className = 'status-message text-red-600';
                }, 800); 
            }
            function checkForMatch() {
                const [card1, card2] = flippedCards;
                if (card1.dataset.value === card2.dataset.value) { 
                    statusMessage.textContent = 'æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…ï¼ ğŸ‰';
                    statusMessage.className = 'status-message text-green-600';
                    matchedPairs++;
                    updateStats();
                    card1.classList.add('matched'); 
                    card2.classList.add('matched');
                    flippedCards = []; 
                    lockBoard = false; 
                    if (matchedPairs === difficultySettings[difficulty].pairs) {
                        stopTimer(); 
                        statusMessage.textContent = `æ­å–œï¼æ‚¨åœ¨ ${secondsElapsed} ç§’å†…å®Œæˆäº†æ‰€æœ‰åŒ¹é…ï¼æ€»å…±å°è¯• ${attempts} æ¬¡ã€‚`;
                        statusMessage.className = 'status-message text-green-700 font-bold';
                    }
                } else { 
                    unflipCards(); 
                }
            }
            function updateStats() {
                pairsMatchedDisplay.textContent = matchedPairs;
                attemptsDisplay.textContent = attempts;
            }
            function setDifficulty(newDifficulty) {
                difficulty = newDifficulty;
                difficultySelector.querySelectorAll('button').forEach(btn => {
                    btn.classList.remove('selected');
                    if (btn.dataset.difficulty === newDifficulty) {
                        btn.classList.add('selected');
                    }
                });
                createBoard(); 
            }
            return {
                init: () => {
                    if (!initialized) {
                        resetButton.addEventListener('click', () => createBoard()); 
                        difficultySelector.querySelectorAll('button').forEach(button => {
                            button.addEventListener('click', (e) => setDifficulty(e.target.dataset.difficulty));
                        });
                        initialized = true;
                    }
                    const selectedButton = difficultySelector.querySelector('button.selected');
                    difficulty = selectedButton ? selectedButton.dataset.difficulty : 'medium';
                    createBoard();
                },
                cleanup: () => { 
                    stopTimer();
                }
            };
        })();

        const objectRecognitionGameModule = (() => {
            const objectDisplay = document.getElementById('object-display');
            const optionsContainer = document.getElementById('object-options-container');
            const statusMessage = document.getElementById('object-status-message');
            const nextButton = document.getElementById('object-next-button');
            const scoreDisplay = document.getElementById('object-score');
            const items = [ { emoji: 'ğŸ', name: 'è‹¹æœ' }, { emoji: 'ğŸŒ', name: 'é¦™è•‰' }, { emoji: 'ğŸš—', name: 'æ±½è½¦' }, { emoji: 'ğŸ ', name: 'æˆ¿å­' }, { emoji: 'â°', name: 'é—¹é’Ÿ' }, { emoji: 'ğŸ”‘', name: 'é’¥åŒ™' }, { emoji: 'ğŸ“š', name: 'ä¹¦æœ¬' }, { emoji: 'ğŸ’»', name: 'ç”µè„‘' }, { emoji: 'âš½', name: 'è¶³çƒ' }, { emoji: 'ğŸŒ²', name: 'æ ‘' }, { emoji: 'â˜€ï¸', name: 'å¤ªé˜³' }, { emoji: 'ğŸŒ™', name: 'æœˆäº®' } ];
            let currentItem = null; 
            let score = 0;
            let initialized = false;
            let itemPool = []; 
            function getRandomItems(arr, n, excludeItem) {
                const filtered = arr.filter(item => item.name !== excludeItem.name); 
                shuffleArray(filtered);
                return filtered.slice(0, n); 
            }
            function loadNewItem() {
                if (itemPool.length === 0) { itemPool = [...items]; shuffleArray(itemPool); } 
                currentItem = itemPool.pop(); 
                objectDisplay.textContent = currentItem.emoji; 
                optionsContainer.innerHTML = ''; 
                statusMessage.textContent = 'è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚';
                statusMessage.className = 'status-message text-blue-700';
                nextButton.style.display = 'none'; 
                const wrongOptionsCount = 2; 
                let options = getRandomItems(items, wrongOptionsCount, currentItem).map(item => item.name);
                options.push(currentItem.name); 
                shuffleArray(options); 
                options.forEach(optionName => {
                    const button = document.createElement('button');
                    button.classList.add('option-button');
                    button.textContent = optionName;
                    button.addEventListener('click', () => checkAnswer(optionName, button));
                    optionsContainer.appendChild(button);
                });
                optionsContainer.querySelectorAll('.option-button').forEach(btn => btn.disabled = false); 
            }
            function checkAnswer(selectedName, buttonElement) {
                optionsContainer.querySelectorAll('.option-button').forEach(btn => btn.disabled = true); 
                if (selectedName === currentItem.name) { 
                    statusMessage.textContent = 'æ­£ç¡®ï¼åšå¾—å¥½ï¼ğŸ‘';
                    statusMessage.className = 'status-message text-green-600';
                    buttonElement.classList.add('correct');
                    score++;
                    scoreDisplay.textContent = score;
                } else { 
                    statusMessage.textContent = `ä¸æ­£ç¡®ã€‚è¿™æ˜¯ ${currentItem.name}ã€‚`;
                    statusMessage.className = 'status-message text-red-600';
                    buttonElement.classList.add('incorrect');
                    optionsContainer.querySelectorAll('.option-button').forEach(btn => {
                        if (btn.textContent === currentItem.name) btn.classList.add('correct');
                    });
                }
                nextButton.style.display = 'inline-block'; 
            }
            return {
                init: () => {
                    if (!initialized) {
                        nextButton.addEventListener('click', loadNewItem);
                        initialized = true;
                    }
                    score = 0; scoreDisplay.textContent = score; 
                    itemPool = [...items]; shuffleArray(itemPool); 
                    loadNewItem(); 
                },
                cleanup: () => {} 
            };
        })();

        const numberSequenceGameModule = (() => {
            const displayArea = document.getElementById('number-sequence-display-area');
            const inputField = document.getElementById('number-sequence-input');
            const submitButton = document.getElementById('number-sequence-submit-button');
            const startButton = document.getElementById('number-sequence-start-button');
            const statusMessage = document.getElementById('number-sequence-status-message');
            const lengthDisplay = document.getElementById('number-sequence-length');
            const correctCountDisplay = document.getElementById('number-sequence-correct');
            const timerValueDisplay = document.getElementById('number-sequence-timer-value');
            const timerBar = document.getElementById('number-sequence-timer-bar');
            let currentSequence = "";
            let sequenceLength = 3; 
            let correctCount = 0;
            let displayTimeBase = 1200; 
            let displayTimePerDigit = 250; 
            let inputTimeLimit = 10; 
            let initialized = false;
            let sequenceTimer = null; 
            let inputTimerInterval = null; 
            let timeRemaining = 0; 
            function updateTimerBar() {
                const percentage = (timeRemaining / inputTimeLimit) * 100;
                timerBar.style.width = `${percentage}%`;
            }
            function startInputTimer() {
                stopInputTimer(); 
                timeRemaining = inputTimeLimit;
                timerValueDisplay.textContent = timeRemaining;
                updateTimerBar();
                inputTimerInterval = setInterval(() => {
                    timeRemaining--;
                    timerValueDisplay.textContent = timeRemaining;
                    updateTimerBar();
                    if (timeRemaining <= 0) { 
                        stopInputTimer();
                        statusMessage.textContent = `æ—¶é—´åˆ°ï¼æ­£ç¡®çš„åºåˆ—æ˜¯ ${currentSequence}ã€‚`;
                        statusMessage.className = 'status-message text-red-600';
                        inputField.disabled = true;
                        submitButton.disabled = true;
                        startButton.disabled = false;
                        startButton.innerHTML = '<i class="fas fa-play"></i> ä¸‹ä¸€ç»„';
                    }
                }, 1000);
            }
            function stopInputTimer() { clearInterval(inputTimerInterval); }
            function generateSequence() {
                let seq = "";
                for (let i = 0; i < sequenceLength; i++) { seq += Math.floor(Math.random() * 10); }
                return seq;
            }
            function startGame() {
                stopInputTimer(); 
                startButton.disabled = true; 
                inputField.disabled = true; inputField.value = ""; 
                submitButton.disabled = true; 
                statusMessage.textContent = "è¯·è®°ä½æ•°å­—...";
                statusMessage.className = 'status-message text-blue-700';
                currentSequence = generateSequence(); 
                displayArea.textContent = currentSequence; 
                const totalDisplayTime = displayTimeBase + (sequenceLength * displayTimePerDigit);
                clearTimeout(sequenceTimer); 
                sequenceTimer = setTimeout(() => {
                    displayArea.textContent = "ç°åœ¨è¾“å…¥"; 
                    inputField.disabled = false; submitButton.disabled = false; 
                    inputField.focus(); 
                    statusMessage.textContent = "è¯·è¾“å…¥æ‚¨è®°ä½çš„åºåˆ—ã€‚";
                    startInputTimer(); 
                }, totalDisplayTime);
            }
            function checkSequence() {
                stopInputTimer(); 
                inputField.disabled = true; submitButton.disabled = true; 
                if (inputField.value === currentSequence) { 
                    statusMessage.textContent = "æ­£ç¡®ï¼å¤ªæ£’äº†ï¼ğŸ‰";
                    statusMessage.className = 'status-message text-green-600';
                    correctCount++;
                    if (correctCount > 0 && correctCount % 2 === 0 && sequenceLength < 10) { sequenceLength++; }
                } else { 
                    statusMessage.textContent = `é”™è¯¯ã€‚æ­£ç¡®çš„åºåˆ—æ˜¯ ${currentSequence}ã€‚`;
                    statusMessage.className = 'status-message text-red-600';
                }
                lengthDisplay.textContent = sequenceLength; 
                correctCountDisplay.textContent = correctCount; 
                startButton.disabled = false; 
                startButton.innerHTML = '<i class="fas fa-play"></i> ä¸‹ä¸€ç»„';
            }
            return {
                init: () => {
                    if (!initialized) {
                        startButton.addEventListener('click', startGame);
                        submitButton.addEventListener('click', checkSequence);
                        inputField.addEventListener('keypress', (e) => { if (e.key === 'Enter' && !submitButton.disabled) checkSequence(); });
                        initialized = true;
                    }
                    stopInputTimer(); 
                    clearTimeout(sequenceTimer);
                    sequenceLength = 3; correctCount = 0;
                    inputTimeLimit = 10 + Math.floor(sequenceLength / 2) ; 
                    lengthDisplay.textContent = sequenceLength;
                    correctCountDisplay.textContent = correctCount;
                    displayArea.textContent = "ç‚¹å‡»å¼€å§‹";
                    statusMessage.textContent = "å‡†å¤‡å¥½äº†å—ï¼Ÿ";
                    statusMessage.className = 'status-message text-blue-700';
                    inputField.value = ""; inputField.disabled = true; submitButton.disabled = true;
                    startButton.disabled = false; startButton.innerHTML = '<i class="fas fa-play"></i> å¼€å§‹';
                    timeRemaining = inputTimeLimit; timerValueDisplay.textContent = timeRemaining; updateTimerBar(); 
                },
                cleanup: () => {
                    stopInputTimer();
                    clearTimeout(sequenceTimer);
                }
            };
        })();

        const quickMathGameModule = (() => {
            const problemDisplay = document.getElementById('quick-math-problem-display');
            const inputField = document.getElementById('quick-math-input');
            const submitButton = document.getElementById('quick-math-submit-button');
            const startButton = document.getElementById('quick-math-start-button');
            const statusMessage = document.getElementById('quick-math-status-message');
            const scoreDisplay = document.getElementById('quick-math-score');
            const difficultySelector = document.getElementById('quick-math-difficulty-selector');
            const timerValueDisplay = document.getElementById('quick-math-timer-value');
            let currentProblem = { text: "", answer: 0 };
            let score = 0;
            let initialized = false;
            let difficulty = 'easy'; 
            let timeLimit = 15; 
            let problemTimerInterval = null; 
            let timeRemaining = 0;
            const problemSettings = {
                easy: { range1: [1, 10], range2: [1, 10], ops: ['+', '-'] },
                medium: { range1: [1, 20], range2: [1, 20], ops: ['+', '-'], multiplyRange: [1, 5] }, 
                hard: { range1: [10, 50], range2: [10, 50], ops: ['+', '-'], multiplyRange: [2, 9], divideRange: [10,50, 2, 5] } 
            };
            function startProblemTimer() {
                stopProblemTimer();
                timeRemaining = timeLimit;
                timerValueDisplay.textContent = timeRemaining;
                problemTimerInterval = setInterval(() => {
                    timeRemaining--;
                    timerValueDisplay.textContent = timeRemaining;
                    if (timeRemaining <= 0) { 
                        stopProblemTimer();
                        statusMessage.textContent = `æ—¶é—´åˆ°ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ ${currentProblem.answer}ã€‚`;
                        statusMessage.className = 'status-message text-red-600';
                        inputField.disabled = true; submitButton.disabled = true;
                        startButton.disabled = false; startButton.innerHTML = '<i class="fas fa-play"></i> ä¸‹ä¸€é¢˜';
                    }
                }, 1000);
            }
            function stopProblemTimer() { clearInterval(problemTimerInterval); }
            function generateProblem() {
                stopProblemTimer(); 
                const setting = problemSettings[difficulty];
                let num1, num2, operator, text, answer;
                operator = setting.ops[Math.floor(Math.random() * setting.ops.length)]; 
                if (difficulty === 'medium' && Math.random() < 0.33) { 
                    operator = '*';
                    num1 = Math.floor(Math.random() * setting.multiplyRange[1]) + setting.multiplyRange[0];
                    num2 = Math.floor(Math.random() * setting.multiplyRange[1]) + setting.multiplyRange[0];
                    answer = num1 * num2;
                    text = `${num1} Ã— ${num2} = ?`;
                } else if (difficulty === 'hard' && Math.random() < 0.5) { 
                    if (Math.random() < 0.5) { 
                        operator = '*';
                        num1 = Math.floor(Math.random() * (setting.multiplyRange[1] - setting.multiplyRange[0] + 1)) + setting.multiplyRange[0];
                        num2 = Math.floor(Math.random() * (setting.multiplyRange[1] - setting.multiplyRange[0] + 1)) + setting.multiplyRange[0];
                        answer = num1 * num2;
                        text = `${num1} Ã— ${num2} = ?`;
                    } else { 
                        operator = '/';
                        let tempAnswer = Math.floor(Math.random() * (setting.multiplyRange[1] - setting.multiplyRange[0] +1)) + setting.multiplyRange[0]; 
                        num2 = Math.floor(Math.random() * (setting.divideRange[2] - setting.divideRange[1] +1)) + setting.divideRange[1]; 
                        if (num2 === 0) num2 = 1; 
                        num1 = tempAnswer * num2; 
                        answer = tempAnswer;
                        text = `${num1} Ã· ${num2} = ?`;
                    }
                } else { 
                    num1 = Math.floor(Math.random() * (setting.range1[1] - setting.range1[0] + 1)) + setting.range1[0];
                    num2 = Math.floor(Math.random() * (setting.range2[1] - setting.range2[0] + 1)) + setting.range2[0];
                    if (operator === '+') {
                        answer = num1 + num2;
                        text = `${num1} + ${num2} = ?`;
                    } else { 
                        if (num1 < num2 && difficulty === 'easy') { [num1, num2] = [num2, num1]; } 
                        answer = num1 - num2;
                        text = `${num1} - ${num2} = ?`;
                    }
                }
                currentProblem = { text, answer };
                problemDisplay.textContent = currentProblem.text; 
                inputField.value = ""; inputField.disabled = false; submitButton.disabled = false; 
                inputField.focus();
                statusMessage.textContent = "è¯·è®¡ç®—ç­”æ¡ˆã€‚";
                statusMessage.className = 'status-message text-blue-700';
                startButton.disabled = true; 
                startProblemTimer(); 
            }
            function checkAnswer() {
                stopProblemTimer(); 
                const userAnswer = parseInt(inputField.value);
                inputField.disabled = true; submitButton.disabled = true; 
                if (!isNaN(userAnswer) && userAnswer === currentProblem.answer) { 
                    statusMessage.textContent = "æ­£ç¡®ï¼éå¸¸æ£’ï¼ğŸš€";
                    statusMessage.className = 'status-message text-green-600';
                    score++;
                } else { 
                    statusMessage.textContent = `é”™äº†å“¦ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ ${currentProblem.answer}ã€‚`;
                    statusMessage.className = 'status-message text-red-600';
                }
                scoreDisplay.textContent = score; 
                startButton.disabled = false; startButton.innerHTML = '<i class="fas fa-play"></i> ä¸‹ä¸€é¢˜'; 
            }
            function setDifficulty(newDifficulty) {
                difficulty = newDifficulty;
                difficultySelector.querySelectorAll('button').forEach(btn => {
                    btn.classList.remove('selected');
                    if (btn.dataset.difficulty === newDifficulty) btn.classList.add('selected');
                });
                timeLimit = (difficulty === 'easy' ? 20 : difficulty === 'medium' ? 15 : 10); 
                generateProblem(); 
            }
            return {
                init: () => {
                    if (!initialized) {
                        startButton.addEventListener('click', generateProblem);
                        submitButton.addEventListener('click', checkAnswer);
                        inputField.addEventListener('keypress', (e) => { if (e.key === 'Enter' && !submitButton.disabled) checkAnswer(); });
                        difficultySelector.querySelectorAll('button').forEach(button => {
                            button.addEventListener('click', (e) => setDifficulty(e.target.dataset.difficulty));
                        });
                        initialized = true;
                    }
                    score = 0; scoreDisplay.textContent = score;
                    const selectedButton = difficultySelector.querySelector('button.selected');
                    difficulty = selectedButton ? selectedButton.dataset.difficulty : 'easy'; 
                    timeLimit = (difficulty === 'easy' ? 20 : difficulty === 'medium' ? 15 : 10); 
                    problemDisplay.textContent = "é€‰æ‹©éš¾åº¦å¹¶å¼€å§‹";
                    statusMessage.textContent = "æ¥æŒ‘æˆ˜ä¸€ä¸‹å§ï¼";
                    statusMessage.className = 'status-message text-blue-700';
                    inputField.value = ""; inputField.disabled = true; submitButton.disabled = true;
                    startButton.disabled = false; startButton.innerHTML = '<i class="fas fa-play"></i> å¼€å§‹';
                    timeRemaining = timeLimit; timerValueDisplay.textContent = timeRemaining; 
                    stopProblemTimer(); 
                },
                cleanup: () => {
                    stopProblemTimer();
                }
            };
        })();

        const colorMatchGameModule = (() => {
            const wordDisplay = document.getElementById('color-match-word-display');
            const matchButton = document.getElementById('color-match-true-button');
            const noMatchButton = document.getElementById('color-match-false-button');
            const startButton = document.getElementById('color-match-start-button');
            const statusMessage = document.getElementById('color-match-status-message');
            const scoreDisplay = document.getElementById('color-match-score');
            const timerValueDisplay = document.getElementById('color-match-timer-value');
            const colorData = [ { name: 'çº¢è‰²', value: '#ef4444' }, { name: 'è“è‰²', value: '#3b82f6' }, { name: 'ç»¿è‰²', value: '#22c55e' }, { name: 'é»„è‰²', value: '#eab308' }, { name: 'ç´«è‰²', value: '#8b5cf6' }, { name: 'æ©™è‰²', value: '#f97316' } ];
            let currentWordText = ''; let currentWordColorValue = '';
            let isMatchScenario = false; 
            let score = 0; let initialized = false; let gameActive = false; 
            let timeLimit = 5; 
            let trialTimerInterval = null; 
            let timeRemaining = 0;
            function startTrialTimer() {
                stopTrialTimer();
                timeRemaining = timeLimit;
                timerValueDisplay.textContent = timeRemaining;
                trialTimerInterval = setInterval(() => {
                    timeRemaining--;
                    timerValueDisplay.textContent = timeRemaining;
                    if (timeRemaining <= 0) { 
                        stopTrialTimer();
                        statusMessage.textContent = `æ—¶é—´åˆ°ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${isMatchScenario ? 'åŒ¹é…' : 'ä¸åŒ¹é…'}ã€‚`;
                        statusMessage.className = 'status-message text-red-600';
                        matchButton.disabled = true; noMatchButton.disabled = true; 
                        startButton.disabled = false; startButton.innerHTML = '<i class="fas fa-play"></i> ä¸‹ä¸€é¢˜'; 
                        gameActive = false;
                    }
                }, 1000);
            }
            function stopTrialTimer() { clearInterval(trialTimerInterval); }
            function generateTrial() {
                stopTrialTimer(); 
                gameActive = true; 
                const wordColorObj = colorData[Math.floor(Math.random() * colorData.length)];
                currentWordText = wordColorObj.name;
                isMatchScenario = Math.random() < 0.5;
                if (isMatchScenario) { 
                    currentWordColorValue = wordColorObj.value;
                } else { 
                    let differentColorObj;
                    do { 
                        differentColorObj = colorData[Math.floor(Math.random() * colorData.length)];
                    } while (differentColorObj.name === currentWordText);
                    currentWordColorValue = differentColorObj.value;
                }
                wordDisplay.textContent = currentWordText;
                wordDisplay.style.color = currentWordColorValue;
                statusMessage.textContent = "è¯è¯­å’Œé¢œè‰²åŒ¹é…å—ï¼Ÿ";
                statusMessage.className = 'status-message text-blue-700';
                matchButton.disabled = false; noMatchButton.disabled = false; 
                startButton.disabled = true; 
                startTrialTimer(); 
            }
            function checkAnswer(userChoseMatch) {
                if (!gameActive) return; 
                stopTrialTimer(); 
                gameActive = false; 
                matchButton.disabled = true; noMatchButton.disabled = true; 
                let correct = false;
                if ((userChoseMatch && isMatchScenario) || (!userChoseMatch && !isMatchScenario)) {
                    correct = true;
                }
                if (correct) {
                    statusMessage.textContent = "æ­£ç¡®ï¼ååº”è¿…é€Ÿï¼ğŸ¨";
                    statusMessage.className = 'status-message text-green-600';
                    score++;
                } else {
                    statusMessage.textContent = `é”™äº†å“¦ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${isMatchScenario ? 'åŒ¹é…' : 'ä¸åŒ¹é…'}ã€‚`;
                    statusMessage.className = 'status-message text-red-600';
                }
                scoreDisplay.textContent = score; 
                startButton.disabled = false; startButton.innerHTML = '<i class="fas fa-play"></i> ä¸‹ä¸€é¢˜'; 
            }
            return {
                init: () => {
                    if (!initialized) {
                        startButton.addEventListener('click', generateTrial);
                        matchButton.addEventListener('click', () => checkAnswer(true));
                        noMatchButton.addEventListener('click', () => checkAnswer(false));
                        initialized = true;
                    }
                    score = 0; scoreDisplay.textContent = score;
                    wordDisplay.textContent = "ç‚¹å‡»å¼€å§‹"; wordDisplay.style.color = '#374151'; 
                    statusMessage.textContent = "å‡†å¤‡æŒ‘æˆ˜ï¼"; statusMessage.className = 'status-message text-blue-700';
                    matchButton.disabled = true; noMatchButton.disabled = true;
                    startButton.disabled = false; startButton.innerHTML = '<i class="fas fa-play"></i> å¼€å§‹';
                    gameActive = false;
                    timeRemaining = timeLimit; timerValueDisplay.textContent = timeRemaining; 
                    stopTrialTimer(); 
                },
                cleanup: () => {
                    stopTrialTimer();
                }
            };
        })();

        const dailyTaskGameModule = (() => {
            const taskListUL = document.getElementById('daily-task-list');
            const resetButton = document.getElementById('daily-task-reset-button');
            const statusMessage = document.getElementById('daily-task-status-message');
            const completedCountSpan = document.getElementById('daily-task-completed-count');
            const defaultTasks = [
                { id: 'task1', text: 'å–ä¸€æ¯æ°´', completed: false, icon: 'fas fa-tint' },
                { id: 'task2', text: 'åƒè¥å…»æ—©é¤', completed: false, icon: 'fas fa-utensils' },
                { id: 'task3', text: 'åˆ·ç‰™è‡³å°‘2åˆ†é’Ÿ', completed: false, icon: 'fas fa-tooth' },
                { id: 'task4', text: 'è¿›è¡Œ10åˆ†é’Ÿè½»åº¦æ´»åŠ¨', completed: false, icon: 'fas fa-walking' },
                { id: 'task5', text: 'é˜…è¯»æˆ–å­¦ä¹ æ–°äº‹ç‰©', completed: false, icon: 'fas fa-book-open' },
                { id: 'task6', text: 'ä¸å®¶äººæˆ–æœ‹å‹äº¤æµ', completed: false, icon: 'fas fa-comments' }
            ];
            let tasks = []; 
            let initialized = false;
            function saveTasks() {
                localStorage.setItem('dailyTasks_æ™ºå…»äº‘', JSON.stringify(tasks));
            }
            function loadTasks() {
                const storedTasks = localStorage.getItem('dailyTasks_æ™ºå…»äº‘');
                if (storedTasks) {
                    tasks = JSON.parse(storedTasks);
                } else {
                    tasks = JSON.parse(JSON.stringify(defaultTasks)); 
                }
            }
            function renderTasks() {
                taskListUL.innerHTML = ''; 
                let completedCount = 0;
                tasks.forEach(task => {
                    const li = document.createElement('li');
                    li.classList.add('task-item');
                    li.dataset.taskId = task.id;
                    const taskText = document.createElement('span');
                    taskText.textContent = task.text;
                    const taskIcon = document.createElement('i');
                    taskIcon.className = `task-icon ${task.icon}`; 
                    if (task.completed) { 
                        li.classList.add('completed'); 
                        completedCount++;
                    }
                    li.appendChild(taskText);
                    li.appendChild(taskIcon);
                    li.addEventListener('click', () => toggleTask(task.id)); 
                    taskListUL.appendChild(li);
                });
                completedCountSpan.textContent = completedCount; 
                statusMessage.textContent = `ä»Šå¤©å·²å®Œæˆ ${completedCount} / ${tasks.length} é¡¹ä»»åŠ¡ã€‚`;
            }
            function toggleTask(taskId) {
                const task = tasks.find(t => t.id === taskId);
                if (task) {
                    task.completed = !task.completed; 
                    saveTasks(); 
                    renderTasks(); 
                }
            }
            function resetAllTasks() {
                tasks = JSON.parse(JSON.stringify(defaultTasks)); 
                saveTasks();
                renderTasks();
                statusMessage.textContent = "æ–°çš„ä¸€å¤©ï¼Œæ–°çš„å¼€å§‹ï¼å·²é‡ç½®æ‰€æœ‰ä»»åŠ¡ã€‚";
            }
            return {
                init: () => {
                    if (!initialized) {
                        resetButton.addEventListener('click', resetAllTasks);
                        initialized = true;
                    }
                    loadTasks(); 
                    renderTasks(); 
                },
                cleanup: () => {}
            };
        })();

        const spotDifferenceGameModule = (() => {
            const panelLeft = document.getElementById('spot-diff-panel-left');
            const panelRight = document.getElementById('spot-diff-panel-right');
            const statusMessage = document.getElementById('spot-difference-status-message');
            const resetButton = document.getElementById('spot-difference-reset-button');
            const foundCountSpan = document.getElementById('spot-diff-found-count');
            const totalCountSpan = document.getElementById('spot-diff-total-count');
            const gridSize = 5; 
            const totalItems = gridSize * gridSize;
            const baseEmojis = ['ğŸ˜€', 'ğŸ˜‚', 'ğŸ˜', 'ğŸ¤”', 'ğŸ˜', 'ğŸ˜¢', 'ğŸ¥³', 'ğŸ¤¯', 'ğŸ¤©', 'ğŸ˜´', 'ğŸ‘', 'ğŸ‘', 'ğŸ‰', 'ğŸ', 'ğŸˆ', 'ğŸš€', 'ğŸ’¡', 'ğŸŒ', 'â­', 'â˜€ï¸']; 
            const numDifferences = 3; 
            let originalItems = []; 
            let differentItems = []; 
            let differenceLocations = []; 
            let foundDifferences = 0;
            let initialized = false;

            function createPanel(panelElement, itemsArray, isClickable = false) {
                panelElement.innerHTML = '';
                panelElement.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
                itemsArray.forEach((item, index) => {
                    const itemDiv = document.createElement('div');
                    itemDiv.classList.add('spot-item');
                    itemDiv.textContent = item;
                    itemDiv.dataset.index = index;
                    if (isClickable) {
                        itemDiv.classList.add('clickable');
                        if (differenceLocations.includes(index) && !itemDiv.classList.contains('found-diff')) {
                             itemDiv.addEventListener('click', handleDifferenceClick);
                        } else if (!differenceLocations.includes(index)) { 
                             itemDiv.addEventListener('click', handleNonDifferenceClick);
                        }
                    }
                    panelElement.appendChild(itemDiv);
                });
            }
            function handleNonDifferenceClick(event) {
                const clickedItem = event.currentTarget;
                if (clickedItem.classList.contains('found-diff')) return; 
                statusMessage.textContent = "è¿™é‡Œæ²¡æœ‰ä¸åŒå“¦ï¼Œå†ä»”ç»†çœ‹çœ‹ï¼";
                statusMessage.className = 'status-message text-orange-600';
                clickedItem.style.transition = 'transform 0.1s ease-in-out';
                clickedItem.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    clickedItem.style.transform = 'scale(1)';
                }, 100);
            }
            function handleDifferenceClick(event) {
                const clickedItem = event.currentTarget;
                const index = parseInt(clickedItem.dataset.index);
                if (differenceLocations.includes(index) && !clickedItem.classList.contains('found-diff')) {
                    clickedItem.classList.add('found-diff'); 
                    foundDifferences++;
                    foundCountSpan.textContent = foundDifferences;
                    statusMessage.textContent = "æ‰¾åˆ°äº†ä¸€ä¸ªä¸åŒç‚¹ï¼ğŸ‘";
                    statusMessage.className = 'status-message text-green-600';
                    const clone = clickedItem.cloneNode(true);
                    clickedItem.parentNode.replaceChild(clone, clickedItem);
                    if (foundDifferences === numDifferences) {
                        statusMessage.textContent = "æ­å–œï¼æ‰€æœ‰ä¸åŒç‚¹éƒ½æ‰¾åˆ°äº†ï¼ğŸ‰";
                        statusMessage.className = 'status-message text-green-700 font-bold';
                        panelRight.querySelectorAll('.spot-item').forEach(item => {
                            const itemClone = item.cloneNode(true); 
                            item.parentNode.replaceChild(itemClone, item);
                            itemClone.classList.remove('clickable'); 
                        });
                    }
                }
            }
            function generateGame() {
                originalItems = [];
                differentItems = [];
                differenceLocations = [];
                foundDifferences = 0;
                let availableEmojis = [...baseEmojis];
                shuffleArray(availableEmojis);
                for (let i = 0; i < totalItems; i++) {
                    originalItems.push(availableEmojis[i % availableEmojis.length]); 
                }
                shuffleArray(originalItems); 
                differentItems = [...originalItems];
                let possibleDiffIndices = Array.from(Array(totalItems).keys()); 
                shuffleArray(possibleDiffIndices);
                for (let i = 0; i < numDifferences; i++) {
                    const diffIndex = possibleDiffIndices[i];
                    differenceLocations.push(diffIndex);
                    let newEmoji;
                    do {
                        newEmoji = baseEmojis[Math.floor(Math.random() * baseEmojis.length)];
                    } while (newEmoji === originalItems[diffIndex]); 
                    differentItems[diffIndex] = newEmoji;
                }
                createPanel(panelLeft, originalItems, false);
                createPanel(panelRight, differentItems, true); 
                foundCountSpan.textContent = foundDifferences;
                totalCountSpan.textContent = numDifferences;
                statusMessage.textContent = "è¯·æ‰¾å‡ºä¸¤è¾¹çš„ä¸åŒä¹‹å¤„ã€‚";
                statusMessage.className = 'status-message text-blue-700';
            }
            return {
                init: () => {
                    if (!initialized) {
                        resetButton.addEventListener('click', generateGame);
                        initialized = true;
                    }
                    generateGame();
                },
                cleanup: () => {}
            };
        })();

        const mazeGameModule = (() => {
            const gridContainer = document.getElementById('maze-grid-container');
            const statusMessage = document.getElementById('maze-status-message');
            const resetButton = document.getElementById('maze-reset-button');
            const movesCountSpan = document.getElementById('maze-moves-count');
            const MAZE_SIZE = 7; 
            let maze = [];
            let playerPos = { r: 0, c: 0 };
            let startPos = { r: 0, c: 0 };
            let endPos = { r: MAZE_SIZE - 1, c: MAZE_SIZE - 1 };
            let moves = 0;
            let initialized = false;
            let gameWon = false;
            let playerPathHistory = []; 

            function generateRecursiveBacktrackerMaze() {
                maze = Array(MAZE_SIZE).fill(null).map(() => Array(MAZE_SIZE).fill(1)); 
                const stack = [];
                let currentCell = { r: startPos.r, c: startPos.c };
                maze[currentCell.r][currentCell.c] = 0; 
                stack.push(currentCell);

                while (stack.length > 0) {
                    currentCell = stack[stack.length - 1]; 
                    const neighbors = [];
                    if (currentCell.r - 2 >= 0 && maze[currentCell.r - 2][currentCell.c] === 1) neighbors.push({ r: currentCell.r - 2, c: currentCell.c, wallR: currentCell.r - 1, wallC: currentCell.c });
                    if (currentCell.r + 2 < MAZE_SIZE && maze[currentCell.r + 2][currentCell.c] === 1) neighbors.push({ r: currentCell.r + 2, c: currentCell.c, wallR: currentCell.r + 1, wallC: currentCell.c });
                    if (currentCell.c - 2 >= 0 && maze[currentCell.r][currentCell.c - 2] === 1) neighbors.push({ r: currentCell.r, c: currentCell.c - 2, wallR: currentCell.r, wallC: currentCell.c - 1 });
                    if (currentCell.c + 2 < MAZE_SIZE && maze[currentCell.r][currentCell.c + 2] === 1) neighbors.push({ r: currentCell.r, c: currentCell.c + 2, wallR: currentCell.r, wallC: currentCell.c + 1 });

                    if (neighbors.length > 0) {
                        const nextCellInfo = neighbors[Math.floor(Math.random() * neighbors.length)];
                        maze[nextCellInfo.wallR][nextCellInfo.wallC] = 0; 
                        maze[nextCellInfo.r][nextCellInfo.c] = 0;       
                        stack.push({ r: nextCellInfo.r, c: nextCellInfo.c });
                    } else {
                        stack.pop();
                    }
                }
                maze[startPos.r][startPos.c] = 2; 
                maze[endPos.r][endPos.c] = 3;     
                
                if (maze[endPos.r][endPos.c] === 1) { 
                     maze[endPos.r][endPos.c] = 3; 
                     if(endPos.r > 0 && maze[endPos.r-1][endPos.c] === 1 && maze[endPos.r-1][endPos.c-1] === 0) maze[endPos.r-1][endPos.c] =0; 
                     else if(endPos.c > 0 && maze[endPos.r][endPos.c-1] === 1 && maze[endPos.r-1]?.[endPos.c-1] === 0) maze[endPos.r][endPos.c-1] =0;
                }

                playerPos = { ...startPos };
                playerPathHistory = [{ ...playerPos }];
                moves = 0;
                gameWon = false;
                updateMovesDisplay();
            }
            
            function renderMaze() {
                if (!gridContainer) return; // Guard against null if called before DOM ready or if ID is wrong
                gridContainer.innerHTML = '';
                gridContainer.style.gridTemplateColumns = `repeat(${MAZE_SIZE}, 1fr)`;
                for (let r = 0; r < MAZE_SIZE; r++) {
                    for (let c = 0; c < MAZE_SIZE; c++) {
                        const cell = document.createElement('div');
                        cell.classList.add('maze-cell');
                        cell.dataset.r = r;
                        cell.dataset.c = c;

                        if (maze[r][c] === 1) cell.classList.add('wall');
                        else if (maze[r][c] === 2) cell.classList.add('start');
                        else if (maze[r][c] === 3) cell.classList.add('end');
                        
                        if (playerPathHistory.some(p => p.r === r && p.c === c)) {
                            cell.classList.add('path-taken');
                        }
                        if (r === playerPos.r && c === playerPos.c) {
                             cell.classList.add('current-pos');
                        }
                        if (maze[r][c] !== 1) { 
                            cell.addEventListener('click', handleCellClick);
                        }
                        gridContainer.appendChild(cell);
                    }
                }
            }
            function handleCellClick(event) {
                if (gameWon) return; 
                const r = parseInt(event.currentTarget.dataset.r);
                const c = parseInt(event.currentTarget.dataset.c);
                const dr = Math.abs(r - playerPos.r);
                const dc = Math.abs(c - playerPos.c);

                if ((dr === 1 && dc === 0) || (dr === 0 && dc === 1)) { 
                    if (maze[r][c] !== 1) { 
                        playerPos = { r, c };
                        if (playerPathHistory.length > 1 && playerPathHistory[playerPathHistory.length - 2].r === r && playerPathHistory[playerPathHistory.length - 2].c === c) {
                            playerPathHistory.pop(); 
                        } else {
                            playerPathHistory.push({ ...playerPos });
                        }
                        moves++;
                        updateMovesDisplay();
                        renderMaze(); 
                        if (r === endPos.r && c === endPos.c) { 
                            gameWon = true;
                            statusMessage.textContent = `æ­å–œï¼æ‚¨ç”¨ ${moves} æ­¥æ‰¾åˆ°äº†å‡ºå£ï¼ğŸ‰`;
                            statusMessage.className = 'status-message text-green-700 font-bold';
                        } else {
                            statusMessage.textContent = "ç»§ç»­å¯»æ‰¾å‡ºå£...";
                            statusMessage.className = 'status-message text-blue-700';
                        }
                    } else {
                        statusMessage.textContent = "ä¸èƒ½ç©¿å¢™å“¦ï¼";
                        statusMessage.className = 'status-message text-red-600';
                    }
                } else {
                    statusMessage.textContent = "è¯·ç‚¹å‡»ç›¸é‚»çš„æ ¼å­ç§»åŠ¨ã€‚";
                    statusMessage.className = 'status-message text-orange-600';
                }
            }
            function updateMovesDisplay() { if(movesCountSpan) movesCountSpan.textContent = moves; }
            return {
                init: () => {
                    if (!gridContainer) {
                        console.error("Maze grid container not found!");
                        return;
                    }
                    if (!initialized) {
                        if(resetButton) resetButton.addEventListener('click', () => {
                            generateRecursiveBacktrackerMaze();
                            renderMaze();
                            if(statusMessage) {
                                statusMessage.textContent = "æ–°è¿·å®«å·²ç”Ÿæˆï¼Œè¯·å¼€å§‹å¯»è·¯ã€‚";
                                statusMessage.className = 'status-message text-blue-700';
                            }
                        });
                        initialized = true;
                    }
                    generateRecursiveBacktrackerMaze();
                    renderMaze();
                    if(statusMessage) {
                        statusMessage.textContent = "è¯·å¼€å§‹å¯»è·¯ã€‚";
                        statusMessage.className = 'status-message text-blue-700';
                    }
                },
                cleanup: () => {}
            };
        })();

        const storySequencingGameModule = (() => {
            const storyTextArea = document.getElementById('story-text-area');
            const snippetsContainer = document.getElementById('sentence-snippets-container'); 
            const dropZone = document.getElementById('story-drop-zone');
            const submitButton = document.getElementById('story-submit-button');
            const statusMessage = document.getElementById('story-status-message');
            const stories = [
                { fullText: "å°æ˜æ—©ä¸Šèµ·åºŠï¼Œå…ˆåˆ·äº†ç‰™ï¼Œç„¶ååƒäº†ç¾å‘³çš„æ—©é¤ã€‚åƒå®Œæ—©é¤åï¼Œä»–é«˜é«˜å…´å…´åœ°å»ä¸Šå­¦äº†ã€‚ä¸‹åˆæ”¾å­¦å›å®¶ï¼Œä»–å…ˆå®Œæˆäº†ä½œä¸šï¼Œç„¶åæ‰å‡ºå»å’Œå°ä¼™ä¼´ä»¬ç©è€ã€‚", sentences: ["å°æ˜æ—©ä¸Šèµ·åºŠï¼Œå…ˆåˆ·äº†ç‰™", "ç„¶ååƒäº†ç¾å‘³çš„æ—©é¤", "åƒå®Œæ—©é¤åï¼Œä»–é«˜é«˜å…´å…´åœ°å»ä¸Šå­¦äº†", "ä¸‹åˆæ”¾å­¦å›å®¶ï¼Œä»–å…ˆå®Œæˆäº†ä½œä¸š", "ç„¶åæ‰å‡ºå»å’Œå°ä¼™ä¼´ä»¬ç©è€"], id: "story1" },
                { fullText: "æ˜¥å¤©æ¥äº†ï¼Œå…¬å›­é‡Œçš„èŠ±éƒ½å¼€äº†ï¼Œæœ‰çº¢è‰²çš„ã€é»„è‰²çš„ï¼Œè¿˜æœ‰ç´«è‰²çš„ã€‚å°é¸Ÿåœ¨æ ‘ä¸Šå”±æ­Œï¼Œè´è¶åœ¨èŠ±ä¸›ä¸­é£èˆã€‚å°åå’Œå¦ˆå¦ˆä¸€èµ·å»å…¬å›­æ”¾é£ç­ï¼Œç©å¾—å¾ˆå¼€å¿ƒã€‚", sentences: ["æ˜¥å¤©æ¥äº†ï¼Œå…¬å›­é‡Œçš„èŠ±éƒ½å¼€äº†", "æœ‰çº¢è‰²çš„ã€é»„è‰²çš„ï¼Œè¿˜æœ‰ç´«è‰²çš„", "å°é¸Ÿåœ¨æ ‘ä¸Šå”±æ­Œï¼Œè´è¶åœ¨èŠ±ä¸›ä¸­é£èˆ", "å°åå’Œå¦ˆå¦ˆä¸€èµ·å»å…¬å›­æ”¾é£ç­", "ç©å¾—å¾ˆå¼€å¿ƒ"], id: "story2" }
            ];
            let currentStory = null;
            let correctOrder = [];
            let draggedSnippet = null;
            let initialized = false;

            function loadStory() {
                currentStory = stories[Math.floor(Math.random() * stories.length)];
                storyTextArea.textContent = currentStory.fullText;
                correctOrder = [...currentStory.sentences];
                let shuffledSnippets = [...currentStory.sentences];
                shuffleArray(shuffledSnippets);
                snippetsContainer.innerHTML = '';
                dropZone.innerHTML = '';
                shuffledSnippets.forEach((sentence, index) => {
                    const snippetDiv = document.createElement('div');
                    snippetDiv.classList.add('snippet');
                    snippetDiv.textContent = sentence;
                    snippetDiv.draggable = true;
                    snippetDiv.dataset.originalText = sentence; 
                    snippetDiv.id = `snippet-${currentStory.id}-${index}`;
                    snippetDiv.addEventListener('dragstart', handleDragStart);
                    snippetsContainer.appendChild(snippetDiv);
                });
                statusMessage.textContent = "è¯·å°†å¥å­æ‹–æ‹½åˆ°ä¸‹æ–¹ï¼ŒæŒ‰æ­£ç¡®é¡ºåºæ’åˆ—ã€‚";
                statusMessage.className = 'status-message text-blue-700';
                submitButton.disabled = false;
            }

            function handleDragStart(e) {
                draggedSnippet = e.target;
                e.dataTransfer.setData('text/plain', e.target.id);
                setTimeout(() => { 
                     e.target.classList.add('dragging');
                }, 0);
            }
             function handleDragEnd(e) {
                if(draggedSnippet) draggedSnippet.classList.remove('dragging');
            }

            function setupDropZone() {
                [dropZone, snippetsContainer].forEach(container => {
                    container.addEventListener('dragover', (e) => {
                        e.preventDefault(); 
                        const afterElement = getDragAfterElement(container, e.clientY);
                        const currentlyDragged = document.querySelector('.dragging');
                        if (currentlyDragged && currentlyDragged.parentNode === container) { 
                            if (afterElement == null) {
                                container.appendChild(currentlyDragged);
                            } else {
                                container.insertBefore(currentlyDragged, afterElement);
                            }
                        }
                    });
                    container.addEventListener('drop', (e) => {
                        e.preventDefault();
                        if (draggedSnippet) {
                            if (draggedSnippet.parentNode !== container) {
                                container.appendChild(draggedSnippet); 
                            } 
                            draggedSnippet.classList.remove('dragging');
                            draggedSnippet.draggable = (container === snippetsContainer); 
                            draggedSnippet = null;
                        }
                    });
                });
                document.addEventListener('dragend', handleDragEnd);
            }

            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('.snippet:not(.dragging)')];
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }

            function checkOrder() {
                const droppedItems = Array.from(dropZone.querySelectorAll('.snippet'));
                if (droppedItems.length !== correctOrder.length) {
                    statusMessage.textContent = "è¯·å°†æ‰€æœ‰å¥å­éƒ½æ‹–åˆ°æ’åºåŒºã€‚";
                    statusMessage.className = 'status-message text-orange-600';
                    return;
                }
                let isCorrect = true;
                for (let i = 0; i < droppedItems.length; i++) {
                    if (droppedItems[i].textContent !== correctOrder[i]) {
                        isCorrect = false;
                        break;
                    }
                }
                if (isCorrect) {
                    statusMessage.textContent = "å¤ªæ£’äº†ï¼é¡ºåºå®Œå…¨æ­£ç¡®ï¼ğŸ‰";
                    statusMessage.className = 'status-message text-green-700 font-bold';
                } else {
                    statusMessage.textContent = "é¡ºåºä¸å¤ªå¯¹å“¦ï¼Œå†è¯•ä¸€æ¬¡å§ï¼";
                    statusMessage.className = 'status-message text-red-600';
                }
                submitButton.disabled = true;
            }

            return {
                init: () => {
                    if (!initialized) {
                        submitButton.addEventListener('click', checkOrder);
                        setupDropZone();
                        initialized = true;
                    }
                    loadStory();
                },
                cleanup: () => {
                     document.removeEventListener('dragend', handleDragEnd);
                }
            };
        })();

        const patternRecognitionGameModule = (() => {
            const displayArea = document.getElementById('pattern-display-area');
            const optionsContainer = document.getElementById('pattern-options-container');
            const nextButton = document.getElementById('pattern-next-button');
            const statusMessage = document.getElementById('pattern-status-message');
            const scoreDisplay = document.getElementById('pattern-score');
            const patterns = [
                { type: 'ABAB', elements: ['ğŸ', 'ğŸŒ'], length: 4, optionsCount: 3 },
                { type: 'ABAB', elements: ['ğŸ”µ', 'ğŸŸ¡'], length: 4, optionsCount: 3 },
                { type: 'AABB', elements: ['ğŸ¶', 'ğŸ±'], length: 4, optionsCount: 3 },
                { type: 'ABC', elements: ['â˜€ï¸', 'ğŸŒ™', 'â­'], length: 3, optionsCount: 4 },
                { type: 'AAB', elements: ['ğŸš—', 'ğŸš²'], length: 3, optionsCount: 3},
            ];
            const allPossibleElements = ['ğŸ', 'ğŸŒ', 'ğŸ”µ', 'ğŸŸ¡', 'ğŸ¶', 'ğŸ±', 'â˜€ï¸', 'ğŸŒ™', 'â­', 'ğŸš—', 'ğŸš²', 'ğŸš€', 'ğŸ ', 'ğŸŒ²', 'ğŸ', 'ğŸ‰'];
            let currentPattern = null;
            let sequence = [];
            let correctAnswer = '';
            let score = 0;
            let initialized = false;

            function generatePatternTrial() {
                currentPattern = patterns[Math.floor(Math.random() * patterns.length)];
                sequence = [];
                let displaySequenceLength = currentPattern.length; 

                if (currentPattern.type === 'ABAB') {
                    for (let i = 0; i < displaySequenceLength; i++) sequence.push(currentPattern.elements[i % 2]);
                    correctAnswer = currentPattern.elements[displaySequenceLength % 2];
                } else if (currentPattern.type === 'AABB') {
                     for (let i = 0; i < displaySequenceLength; i++) sequence.push(currentPattern.elements[Math.floor(i/2) % 2]);
                    correctAnswer = currentPattern.elements[Math.floor(displaySequenceLength/2) % 2];
                } else if (currentPattern.type === 'ABC') {
                    for (let i = 0; i < displaySequenceLength; i++) sequence.push(currentPattern.elements[i % 3]);
                    correctAnswer = currentPattern.elements[displaySequenceLength % 3];
                } else if (currentPattern.type === 'AAB') {
                    for (let i = 0; i < displaySequenceLength; i++) {
                        if (i % 3 === 2) sequence.push(currentPattern.elements[1]); 
                        else sequence.push(currentPattern.elements[0]); 
                    }
                     if (displaySequenceLength % 3 === 2) correctAnswer = currentPattern.elements[1];
                     else correctAnswer = currentPattern.elements[0];
                }

                displayArea.innerHTML = '';
                sequence.forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.classList.add('pattern-item');
                    itemDiv.textContent = item;
                    displayArea.appendChild(itemDiv);
                });
                const questionMark = document.createElement('div');
                questionMark.classList.add('pattern-item');
                questionMark.textContent = '?';
                displayArea.appendChild(questionMark);

                let options = [correctAnswer];
                let tempElements = [...allPossibleElements]; 
                shuffleArray(tempElements);
                for(let el of tempElements) {
                    if (options.length >= currentPattern.optionsCount) break;
                    if (!options.includes(el) && el !== correctAnswer) {
                        options.push(el);
                    }
                }
                while (options.length < currentPattern.optionsCount) {
                     let randomElement = allPossibleElements[Math.floor(Math.random() * allPossibleElements.length)];
                      if (!options.includes(randomElement)) {
                        options.push(randomElement);
                    }
                }

                shuffleArray(options);
                optionsContainer.innerHTML = '';
                options.forEach(opt => {
                    const optButton = document.createElement('button');
                    optButton.classList.add('pattern-option-button');
                    optButton.textContent = opt;
                    optButton.addEventListener('click', () => checkPatternAnswer(opt, optButton));
                    optionsContainer.appendChild(optButton);
                });
                statusMessage.textContent = "é€‰æ‹©æ­£ç¡®çš„ä¸‹ä¸€ä¸ªå›¾æ¡ˆã€‚";
                statusMessage.className = 'status-message text-blue-700';
                optionsContainer.querySelectorAll('button').forEach(b => b.disabled = false);
                nextButton.disabled = true;
            }

            function checkPatternAnswer(selectedOption, buttonElement) {
                optionsContainer.querySelectorAll('button').forEach(b => b.disabled = true);
                if (selectedOption === correctAnswer) {
                    statusMessage.textContent = "æ­£ç¡®ï¼è§„å¾‹æ‰¾åˆ°äº†ï¼ğŸ§ ";
                    statusMessage.className = 'status-message text-green-600';
                    buttonElement.style.backgroundColor = '#34d399'; 
                    score++;
                } else {
                    statusMessage.textContent = `é”™äº†å“¦ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ ${correctAnswer}ã€‚`;
                    statusMessage.className = 'status-message text-red-600';
                    buttonElement.style.backgroundColor = '#f87171'; 
                     optionsContainer.querySelectorAll('button').forEach(b => {
                        if(b.textContent === correctAnswer) b.style.backgroundColor = '#34d399';
                    });
                }
                scoreDisplay.textContent = score;
                nextButton.disabled = false;
            }

            return {
                init: () => {
                    if (!initialized) {
                        nextButton.addEventListener('click', generatePatternTrial);
                        initialized = true;
                    }
                    score = 0;
                    scoreDisplay.textContent = score;
                    generatePatternTrial();
                },
                cleanup: () => {}
            };
        })();

        const soundSequenceGameModule = (() => {
            const playButton = document.getElementById('sound-play-sequence-button');
            const soundButtonsContainer = document.getElementById('sound-button-container');
            const userSequenceDisplay = document.getElementById('sound-user-sequence-display');
            const submitButton = document.getElementById('sound-submit-button');
            const statusMessage = document.getElementById('sound-status-message');
            const lengthDisplay = document.getElementById('sound-sequence-length-display');
            const scoreDisplay = document.getElementById('sound-score-display');

            const availableNotes = ['C4', 'D4', 'E4', 'F4', 'G4']; 
            const noteLabels = ['Do', 'Re', 'Mi', 'Fa', 'So']; 
            let currentSequence = []; 
            let userSequence = [];
            let sequenceLength = 3;
            let score = 0;
            let initialized = false;
            let synth = null; 
            let audioContextStarted = false;
            let playTimeout = null; 

            async function startAudioContext() {
                if (Tone.context.state !== 'running') {
                    try {
                        await Tone.start();
                        audioContextStarted = true;
                        console.log("AudioContext started by Tone.js");
                        if (!synth) synth = new Tone.Synth().toDestination(); 
                    } catch (e) {
                        console.error("Error starting Tone.js audio context:", e);
                        statusMessage.textContent = "æ— æ³•æ¿€æ´»éŸ³é¢‘ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®ã€‚";
                        statusMessage.className = 'status-message text-red-600';
                    }
                } else {
                    audioContextStarted = true; 
                     if (!synth) synth = new Tone.Synth().toDestination();
                }
            }

            function createSoundButtons() {
                soundButtonsContainer.innerHTML = '';
                availableNotes.forEach((note, index) => {
                    const button = document.createElement('button');
                    button.classList.add('sound-button');
                    button.textContent = noteLabels[index];
                    button.dataset.note = note;
                    button.addEventListener('click', () => handleSoundButtonClick(note, button));
                    soundButtonsContainer.appendChild(button);
                });
            }

            async function handleSoundButtonClick(note, buttonElement) {
                if (!audioContextStarted) await startAudioContext();
                if (!synth || !audioContextStarted) {
                    statusMessage.textContent = "éŸ³é¢‘æœªå°±ç»ªï¼Œè¯·é‡è¯•ã€‚"; return;
                }
                
                userSequence.push(note);
                userSequenceDisplay.textContent = userSequence.map(n => noteLabels[availableNotes.indexOf(n)]).join(' - ');
                
                buttonElement.classList.add('playing');
                try {
                    synth.triggerAttackRelease(note, "8n", Tone.now());
                } catch(e) { console.error("Error playing sound:", e); }
                setTimeout(() => buttonElement.classList.remove('playing'), 200);

                if (userSequence.length === sequenceLength) {
                    submitButton.disabled = false;
                } else {
                    submitButton.disabled = true;
                }
            }

            function generateNewSequence() {
                currentSequence = [];
                for (let i = 0; i < sequenceLength; i++) {
                    currentSequence.push(availableNotes[Math.floor(Math.random() * availableNotes.length)]);
                }
                userSequence = [];
                userSequenceDisplay.textContent = '';
                submitButton.disabled = true;
                playButton.disabled = false;
                lengthDisplay.textContent = sequenceLength;
                statusMessage.textContent = "å‡†å¤‡è†å¬åºåˆ—ã€‚";
                statusMessage.className = 'status-message text-blue-700';
                soundButtonsContainer.querySelectorAll('.sound-button').forEach(b => b.disabled = true); 
            }

            async function playCurrentSequence() {
                if (!audioContextStarted) await startAudioContext();
                if (!synth || !audioContextStarted) {
                     statusMessage.textContent = "éŸ³é¢‘æœªå°±ç»ªï¼Œè¯·ç¨åå†è¯•æˆ–ç‚¹å‡»æ’­æ”¾ã€‚"; return;
                }

                playButton.disabled = true;
                soundButtonsContainer.querySelectorAll('.sound-button').forEach(b => b.disabled = true); 

                clearTimeout(playTimeout); 

                function playNoteWithDelay(index) {
                    if (index >= currentSequence.length) {
                        soundButtonsContainer.querySelectorAll('.sound-button').forEach(b => b.disabled = false); 
                        statusMessage.textContent = "è¯·æŒ‰é¡ºåºé‡ç°å£°éŸ³ã€‚";
                        return;
                    }
                    const note = currentSequence[index];
                    const buttonToHighlight = soundButtonsContainer.querySelector(`[data-note="${note}"]`);
                    
                    if (buttonToHighlight) buttonToHighlight.classList.add('playing');
                    try {
                        synth.triggerAttackRelease(note, "8n", Tone.now());
                    } catch(e) { console.error("Error playing sound in sequence:", e); }
                    
                    playTimeout = setTimeout(() => {
                        if (buttonToHighlight) buttonToHighlight.classList.remove('playing');
                        playNoteWithDelay(index + 1);
                    }, 600); 
                }
                playNoteWithDelay(0);
            }

            function checkUserSequence() {
                let correct = userSequence.length === currentSequence.length && userSequence.every((val, index) => val === currentSequence[index]);

                if (correct) {
                    statusMessage.textContent = "æ­£ç¡®ï¼å¬åŠ›çœŸæ£’ï¼ğŸ¶";
                    statusMessage.className = 'status-message text-green-600';
                    score++;
                    if (sequenceLength < availableNotes.length + 3) { 
                        sequenceLength++;
                    }
                } else {
                    statusMessage.textContent = "ä¸å®Œå…¨æ­£ç¡®ï¼Œæ­£ç¡®åºåˆ—æ˜¯ï¼š" + currentSequence.map(n => noteLabels[availableNotes.indexOf(n)]).join(' - ');
                    statusMessage.className = 'status-message text-red-600';
                }
                scoreDisplay.textContent = score;
                generateNewSequence(); 
            }

            return {
                init: () => {
                    if (!initialized) {
                        playButton.addEventListener('click', playCurrentSequence);
                        submitButton.addEventListener('click', checkUserSequence);
                        createSoundButtons();
                        initialized = true;
                    }
                    startAudioContext().then(() => {
                        score = 0;
                        scoreDisplay.textContent = score;
                        sequenceLength = 3; 
                        generateNewSequence();
                    }).catch(e => {
                         statusMessage.textContent = "éŸ³é¢‘åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢æˆ–æ£€æŸ¥æµè§ˆå™¨è®¾ç½®ã€‚";
                    });
                },
                cleanup: () => { 
                    clearTimeout(playTimeout);
                    if (synth && audioContextStarted) { 
                        try { synth.releaseAll(); } catch(e) { console.warn("Synth release error:", e)}
                    }
                }
            };
        })();

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                    if (targetId === '#games-hub') {
                        const activeGameButton = document.querySelector('.game-select-button.active');
                        if (!activeGameButton) { setActiveGame(''); } 
                    }
                }
            });
        });

        setActiveGame(''); 
    });
    </script>
</body>
</html>
